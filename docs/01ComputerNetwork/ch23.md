TCP 重传、滑动窗口、流量控制、拥塞控制
===

# 重传机制

常见的重传机制有：超时重传、快速重传、SACK、D-SACK。

## 超时重传

在发送数据时，设定一个定时器，当超过指定的时间后，没有收到对方的 `ACK` 确认应答报文，就会重发该数据。

TCP 会在以下两种情况发生超时重传：

- 数据包丢失
- 确认应答丢失

---

`RTT`（Round-Trip Time 往返时延）：数据发送时刻导接受到确认的时刻点的差值。比如主机A发送SYN报文开始，到收到ACK报文为止。

超时重传时间是以 `RTO` （Retransmission Timeout 超时重传时间）表示。

- `RTO`设置时间过长，会造成网络的间隙时间增大，降低了网络传输效率
- `RTO`设置时间过短，会造成不必要的重传，还没有接受到ACK报文，就直接进行了重发。

综上所述，`RTO`时间应该**略大于**一次报文的往返时间`RTT`。

实际当中由于网络时常变化，因此`RTT`是一个变化的值，所以`RTO`也是一个变化的值。

---

每当遇到一次超时重传时，都会将下一次超时时间间隔设为先前值的两倍。两次超时，就说明网络环境差，不宜频繁反复发送。

**超时周期可能会过长，引出「快速重传」机制来解决超时重发的时间等待。**

## 快速重传

当发送多个报文时，接收方发送ACK回应已经正确接受的报文，当发送seq5时，ACK回应多个ACK2，就表明中间有seq2没有正确接受，会重发seq2报文。

> ACK报文对已经接受的报文确认，但不能确定后续需要重发seq2，还是seq2以后的所有报文，因为seq2以后的报文有部分是正确的接受的。

由于快速重传不能确认重传哪些TCP报文，有了`SACK`方法。

## SACK方法



# 滑动窗口







# 流量控制





# 拥塞控制

