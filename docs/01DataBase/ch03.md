InnoDB存储引擎
===

## 一行记录的存储









## char和varchar区别

### MySQL层区别

- 最大长度：char是255，varchar是65535，单位是**字符**（而不是字节）。

- 尾随空格：char会将尾随空格去掉，而varchar不会。

  > 如果char字段有唯一索引，`a`和`a `会提示唯一索引冲突。 

- 存储空间占用：varchar会占用额外的1~2字节来存储字符串长度。如果最大长度超过255，就需要2字节，否则1字节。(变长字段长度列表)                          

### 存储引擎层区别

在InnoDB存储引擎下、DYNAMIC行格式下。

- varchar类型对于短字符串、长字符串、多字节编码，都是存储了实际的字符+字符长度
- char类型存储字符 + 字符长度，对于`CHAR(N)`字段，如果实际存储数据小于`N`字节，会填充空格到`N`个字节。

### 性能对比

- **char填充空格可能导致浪费存储空间，进而导致性能下降**。
- 因为char多存储一些空格，意味着需要从磁盘读写更多的数据、耗费更多内存、查找数据时删除空格可能也会耗费一些CPU性能。
- 使用char类型的好处，插入记录分配100个字节，后序修改不会造成页分裂、空分析等问题。
- 而varchar(100)没有提前分配存储空间，后序Update可能造成页分裂，导致性能下降。
  - MyISAM会拆成不同的片段存储

### 其他字符串

- BINARY / VARBINARY ： 存放二进制字符串
- BLOB / TEXT : 存放较大的数据，分别采用二进制和字符方式存储

- ENUM：枚举