<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>配个环境（哭 iDoc</title>
    <meta name="description" content="对于导入的包，编译器会首先在GOROOT中寻找，随后会在项目所对应的GOPATH中寻找，最后才是在全局GOPATH中寻找，如果都无法找到，编译器将会报错。">
    <meta name="keywords" content="notebook">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/fancybox.css?v=1.25.0">
    <link rel="icon" href="../logo.png" type="image/x-icon">
    <script src="../js/copy.js?v=1.25.0"></script>
    <script src="../js/dark-mode.js?v=1.25.0"></script>
    <script src="../js/markdown-style.js?v=1.25.0"></script>
    <script src="../js/jquery.min.js?v=1.25.0"></script>
    <script src="../js/fancybox.umd.js?v=1.25.0"></script>
  </head>
  <body><button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script>
// Get the button:
let mybutton = document.getElementById("myBtn");
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};
// 顶部隐藏，底部隐藏
function scrollFunction() {
if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
mybutton.style.display = "block";
} else {
mybutton.style.display = "none";
}
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
document.body.scrollTop = 0; // For Safari
document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
</script>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="iDoc logo" src="../logo.png">
<span class="title">iDoc</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="index.html" target="" class="active">Go</a></li>
            <li><a href="../01MySQL/index.html" target="" class="">MySQL</a></li>
            <li><a href="../01Redis/index.html" target="" class="">Redis</a></li>
            <li><a href="../01LeetCode/index.html" target="" class="">LeetCode</a></li>
            <li><a href="../02HelloWorld/index.html" target="" class="">Hello World</a></li>
          </ul><a href="https://github.com/shixiaocaia" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper sidebar">
      <div class="sidebar-border">
        <aside class="sidebar" role="navigation">
          <div>
            <a href="index.html" class="">↩️README</a>
            <label>Hello World</label>
            <a href="ch00.html" class="">配个环境</a>
            <a href="ch04.html" class="">Go Moudle</a>
            <a href="ch01.html" class="">基础语法</a>
            <a href="ch02.html" class="">并发编程</a>
            <label>Web编程</label>
            <a href="ch03.html" class="">gorm</a>
            <a href="ch05.html" class="">gin</a>
            <label>原理深入</label>
            <a href="ch06.html" class="">原理分析</a>
          </div>
        </aside>
      </div>
      <markdown-style>
        <h1 id="配个环境哭"><a aria-hidden="true" tabindex="-1" href="#配个环境哭" class="anchor"><span class="icon icon-link"></span></a>配个环境（哭</h1>
        <h2 id="安装"><a aria-hidden="true" tabindex="-1" href="#安装" class="anchor"><span class="icon icon-link"></span></a>安装</h2>
        <ol>
          <li>下载<a href="https://link.segmentfault.com/?enc=GJ%2Fx51QtfKANYfOQDx%2FZYQ%3D%3D.yWqrklYSk2AczBi9JWI762tgQJX0HeUOlzJNhQgiCVc%3D">GO语言</a></li>
          <li>安装msi文件，<code>go version</code>检测安装</li>
          <li>msi安装会默认配置环境变量，修改GOPATH路径
            <ul>
              <li>创建GOPATH目录，在目录下创建三个文件夹</li>
              <li>bin:用来存放编译后生成的可执行文件</li>
              <li>pkg:用来存放编译后生成的归档文件</li>
              <li>src:用来存放源码文件</li>
            </ul>
          </li>
          <li>设置代理<code>go env -w GOPROXY=https://goproxy.cn,direct</code></li>
          <li>开启go modules<code>go env -w GO111MODULE=on</code></li>
        </ol>
        <h2 id="导包"><a aria-hidden="true" tabindex="-1" href="#导包" class="anchor"><span class="icon icon-link"></span></a>导包</h2>
        <p>对于导入的包，编译器会首先在<code>GOROOT</code>中寻找，随后会在项目所对应的<code>GOPATH</code>中寻找，最后才是在<code>全局GOPATH</code>中寻找，如果都无法找到，编译器将会报错。</p>
        <h3 id="包管理工具"><a aria-hidden="true" tabindex="-1" href="#包管理工具" class="anchor"><span class="icon icon-link"></span></a>包管理工具</h3>
        <ol>
          <li>
            <p><strong>GOPATH</strong>：把依赖包通过go get命令拉到本地GOPATH目录下，缺点是没法实现依赖包多版本管理。</p>
            <ul>
              <li>在工程经过<code>go build</code>、<code>go install</code>或 <code>go get</code>等指令后，会将拉取的第三方xxx依赖包放在<code>GOPATH/src</code>目录下</li>
              <li>产生的二进制可执行文件放在<code>GOPATH/bin</code> 目录下</li>
              <li>生成的中间缓存文件会被保存在 <code>GOPATH/pkg</code>下。</li>
            </ul>
          </li>
          <li>
            <p><strong>DEP</strong>：将依赖包通过DEP命令打包到工程下的vendor目录。Shopee金融团队、字节跳动教育团队用的就是DEP</p>
            <ul>
              <li>编译 Go 代码会优先从工程目录下的<code>vendor</code>目录先寻找依赖包，如果没有找到，然后<code>GOPATH</code> 中查找，都没找到最后在 <code>GOROOT</code>中查找。</li>
            </ul>
          </li>
          <li>
            <p><strong>GoMod</strong>：将依赖包拉取到统一的pkg目录下，分版本存储。腾讯云用GoMod的团队会比较多。</p>
            <ul>
              <li><code>GOMODULE</code>模式下所有依赖的包存放在<code>GOPATH/pkg/mod</code>目录下</li>
              <li>所有第三方二进制可执行文件放在<code>GOPATH/bin</code>目录下</li>
              <li>且工程项目可以放在<code>GOPATH</code>路径之外，但要求项目中需要有<code>go.mod</code>文件（该文件通过<code>go mod init</code>命令初始化可以生成）。</li>
              <li>注意：所使用的包，还是需要手动<code>go get</code></li>
            </ul>
          </li>
        </ol>
        <blockquote>
          <ul>
            <li>go mod init testname后，引用该模块下的package时，作为共同的前缀，同时也是模块的标识。</li>
            <li>在项目的根目录中执行 go get 命令的话，go get 会同步更新 go.mod 和 go.sum 文件，go.mod 中记录的是依赖名及其版本，如：go.sum 文件中则会记录依赖包的哈希值（同时还有依赖包中 go.mod 的哈希值）</li>
            <li><code>go mod tidy</code>拉取缺少的模块，移除不用的模块</li>
            <li><code>go mod vendor</code>将 GOPATH/src/pkg/mod 中的缓存包，复制到项目的 vendor 目录中，即使用每个项目使用自身包的模式，类似之前的 govendor 管理方式</li>
            <li><code>go mod download</code>下载依赖包</li>
            <li><code>go mod edit</code>编辑 go.mod 文件一般直接用 ide 编辑就行</li>
            <li><code>go mod graph</code>打印模块依赖图</li>
            <li><code>go mod verify</code>验证依赖是否正确</li>
            <li><code>go mod why</code>解释为什么需要依赖</li>
          </ul>
        </blockquote>
        <h3 id="golang环境"><a aria-hidden="true" tabindex="-1" href="#golang环境" class="anchor"><span class="icon icon-link"></span></a>golang环境</h3>
        <p>设置了Go Modules后，不能与$GOPATH共存,所以把项目从$GOPATH中移出即可，否则会提示go.mod exists but should not</p>
        <h2 id="目录结构"><a aria-hidden="true" tabindex="-1" href="#目录结构" class="anchor"><span class="icon icon-link"></span></a>目录结构</h2>
        <ul>
          <li>api：用于存放依照 <code>Go</code> 版本顺序的API增量列表文件。这里所说的API包含公开的变量、常量、函数等。这些API增量列表文件用于 <code>Go</code> 语言API检查</li>
          <li>bin：用于存放主要的标准命令文件（可执行文件），包含<code>go</code>、<code>godoc</code>、<code>gofmt</code></li>
          <li>blog：用于存放官方博客中的所有文章</li>
          <li>doc：用于存放标准库的HTML格式的程序文档。我们可以通过<code>godoc</code>命令启动一个Web程序展示这些文档</li>
          <li>lib：用于存放一些特殊的库文件</li>
          <li>misc：用于存放一些辅助类的说明和工具</li>
          <li>pkg：用于存放安装<code>Go</code>标准库后的所有归档文件（以<code>.a</code>结尾的文件）。注意，你会发现其中有名称为<code>linux_amd64</code>的文件夹，我们称为平台相关目录。这类文件夹的名称由对应的操作系统和计算架构的名称组合而成。通过<code>go install</code>命令，<code>Go</code>程序会被编译成平台相关的归档文件存放到其中</li>
          <li>src：用于存放 <code>Go</code>自身、<code>Go</code> 标准工具以及标准库的所有源码文件</li>
          <li>test：存放用来测试和验证<code>Go</code>本身的所有相关文件</li>
        </ul>
        <hr>
        <ul>
          <li>go.sum：罗列了当前项目直接或间接依赖的所有模块版本，并写明了那些模块版本的 SHA-256 哈希值以备 Go 在今后的操作中保证项目所依赖的那些模块版本不会被篡改。</li>
        </ul>
        <h2 id="编译问题"><a aria-hidden="true" tabindex="-1" href="#编译问题" class="anchor"><span class="icon icon-link"></span></a>编译问题</h2>
        <ul>
          <li>同一个包下调用其他函数，需要确保是按包编译的，还需要确保同一个<em>包下</em>只有一个main函数。</li>
        </ul>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#安装" class="tocs-link">安装</a></li>
            <li><a href="#导包" class="tocs-link">导包</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#包管理工具" class="tocs-link">包管理工具</a></li>
                <li><a href="#golang环境" class="tocs-link">golang环境</a></li>
              </ol>
            </li>
            <li><a href="#目录结构" class="tocs-link">目录结构</a></li>
            <li><a href="#编译问题" class="tocs-link">编译问题</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.25.0"></script>
    <div class="footer warpper">Created by <a href="https://github.com/shixiaocaia" target="_blank">shixiaocaia</a> | Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a><br>Think less and do more.</div>
    <script src="../js/tocbot.js?v=1.25.0"></script>
  </body>
</html>
