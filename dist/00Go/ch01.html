<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello world 今天是个好天气</title>
    <meta name="description" content="Go 模块准备好后，只需简单几步，即可将其发布出去：">
    <meta name="keywords" content="notebook">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.26.6">
    <link rel="stylesheet" type="text/css" href="../css/fancybox.css?v=1.26.6">
    <link rel="icon" href="../logo.png" type="image/x-icon">
    <script src="../js/copy.js?v=1.26.6"></script>
    <script src="../js/dark-mode.js?v=1.26.6"></script>
    <script src="../js/markdown-style.js?v=1.26.6"></script>
    <script src="../js/jquery.min.js?v=1.26.6"></script>
    <script src="../js/fancybox.umd.js?v=1.26.6"></script>
  </head>
  <body><button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script>
// Get the button:
let mybutton = document.getElementById("myBtn");
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};
// 顶部隐藏，底部隐藏
function scrollFunction() {
if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
mybutton.style.display = "block";
} else {
mybutton.style.display = "none";
}
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
document.body.scrollTop = 0; // For Safari
document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
</script>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="今天是个好天气 logo" src="../logo.png">
<span class="title">今天是个好天气</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="index.html" target="" class="active">Go</a></li>
            <li><a href="../01MySQL/index.html" target="" class="">MySQL</a></li>
            <li><a href="../01Redis/index.html" target="" class="">Redis</a></li>
            <li><a href="../01LeetCode/index.html" target="" class="">LeetCode</a></li>
            <li><a href="../02HelloWorld/index.html" target="" class="">Hello World</a></li>
          </ul><a href="https://github.com/shixiaocaia" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper sidebar">
      <div class="sidebar-border">
        <aside class="sidebar" role="navigation">
          <div>
            <a href="index.html" class="">↩️README</a>
            <label>Hello World</label>
            <a href="ch00.html" class="">配个环境</a>
            <a href="ch01.html" class="">基础语法</a>
            <a href="ch02.html" class="">并发编程</a>
            <label>Web编程</label>
            <a href="ch03.html" class="">gorm</a>
            <a href="ch04.html" class="">gin</a>
            <label>原理深入</label>
            <a href="ch05.html" class="">逃逸分析</a>
            <a href="ch06.html" class="">数据结构</a>
          </div>
        </aside>
      </div>
      <markdown-style>
        <h1 id="hello-world"><a aria-hidden="true" tabindex="-1" href="#hello-world" class="anchor"><span class="icon icon-link"></span></a>Hello world</h1>
        <h2 id="go语言使用"><a aria-hidden="true" tabindex="-1" href="#go语言使用" class="anchor"><span class="icon icon-link"></span></a>Go语言使用</h2>
        <h3 id="获取远程包"><a aria-hidden="true" tabindex="-1" href="#获取远程包" class="anchor"><span class="icon icon-link"></span></a>获取远程包</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">go</span> get github<span class="token punctuation">.</span>com<span class="token operator">/</span>avb<span class="token operator">/</span>asd
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">go</span> get <span class="token operator">-</span>u <span class="token comment">//自动更新包</span>
</span></code><input type="hidden" value="go get github.com/avb/asd

go get -u //自动更新包
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="go-moudle"><a aria-hidden="true" tabindex="-1" href="#go-moudle" class="anchor"><span class="icon icon-link"></span></a>Go Moudle</h2>
        <h3 id="如何使用"><a aria-hidden="true" tabindex="-1" href="#如何使用" class="anchor"><span class="icon icon-link"></span></a>如何使用</h3>
        <ul>
          <li>go mod tidy会检测import中缺少的包，进行下载</li>
          <li>go get roc.io/quote@v1.9.1 指定版本号</li>
          <li>再执行一次go mod tidy 可以去除不必要的包</li>
        </ul>
        <h3 id="发布步骤"><a aria-hidden="true" tabindex="-1" href="#发布步骤" class="anchor"><span class="icon icon-link"></span></a>发布步骤</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">module github<span class="token punctuation">.</span>com<span class="token operator">/</span>shixiaocaia<span class="token operator">/</span>Learn_go
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">go</span> <span class="token number">1.20</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5">require rsc<span class="token punctuation">.</span>io<span class="token operator">/</span>quote v1<span class="token punctuation">.</span><span class="token number">5.1</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">require <span class="token punctuation">(</span>
</span><span class="code-line line-number" line="8">	golang<span class="token punctuation">.</span>org<span class="token operator">/</span>x<span class="token operator">/</span>text v0<span class="token punctuation">.</span><span class="token number">0.0</span><span class="token operator">-</span><span class="token number">20170915032832</span><span class="token operator">-</span>14c0d48ead0c <span class="token comment">// indirect</span>
</span><span class="code-line line-number" line="9">	rsc<span class="token punctuation">.</span>io<span class="token operator">/</span>sampler v1<span class="token punctuation">.</span><span class="token number">3.0</span> <span class="token comment">// indirect</span>
</span><span class="code-line line-number" line="10"><span class="token punctuation">)</span>
</span></code><input type="hidden" value="module github.com/shixiaocaia/Learn_go

go 1.20

require rsc.io/quote v1.5.1

require (
	golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c // indirect
	rsc.io/sampler v1.3.0 // indirect
)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>Go 模块准备好后，只需简单几步，即可将其发布出去：</p>
        <ol>
          <li>
            <p>打开命令行并进入模块根目录；</p>
          </li>
          <li>
            <p>执行 <code>go mod tidy</code> 命令，删除一些不必要的模块依赖；</p>
            <p>我们演示发布的模块没有引用任何依赖，因此这步可有可无；</p>
          </li>
          <li>
            <p>执行测试用例，最后一次确认代码运行无误；</p>
            <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"> <span class="token keyword">go</span> test <span class="token operator">...</span> 
</span></code><input type="hidden" value=" go test ... 
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
            <p><code>go test</code> 命令执行模块的单测用例，用例可以用 <em>Go</em> 语言的测试框架来写。我们演示的模块没有测试用例，因此这步也可以跳过。</p>
          </li>
          <li>
            <p>执行 <code>git tag</code> 命令，用新版本号打标签；</p>
            <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"># 提交代码
</span><span class="code-line line-number" line="2">git commit <span class="token operator">-</span>m <span class="token string">"first version"</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"># 打标签
</span><span class="code-line line-number" line="5">git tag v1<span class="token punctuation">.</span><span class="token number">0.0</span>
</span></code><input type="hidden" value="# 提交代码
git commit -m &#x22;first version&#x22;

# 打标签
git tag v1.0.0
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
            <p>版本号必须符合模块版本命名规则，以便让用户知晓代码变更情况（接口是否兼容）。</p>
          </li>
          <li>
            <p>将新标签推到原仓库（如 <em>Github</em> ）；</p>
            <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">git push origin v1<span class="token punctuation">.</span><span class="token number">0.0</span>
</span></code><input type="hidden" value="git push origin v1.0.0
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
          <li>
            <p>执行 <code>go list</code> 命令触发 <em>Go</em> 更新模块索引信息，确保新发布的模块可用；</p>
            <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">GOPROXY<span class="token operator">=</span>proxy<span class="token punctuation">.</span>golang<span class="token punctuation">.</span>org <span class="token keyword">go</span> list <span class="token operator">-</span>m github<span class="token punctuation">.</span>com<span class="token operator">/</span>fasionchan<span class="token operator">/</span>goutils@v1<span class="token punctuation">.</span><span class="token number">0.0</span>
</span></code><input type="hidden" value="GOPROXY=proxy.golang.org go list -m github.com/fasionchan/goutils@v1.0.0
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
            <p>注意到，我们在命令之前设置了 <em>GOPROXY</em> 环境变量，指定使用 <em>proxy.golang.org</em> 作为 <em>Go</em> 代理。这可以确保我们请求到官方代理，而不是各种加速镜像。</p>
          </li>
        </ol>
        <h2 id="数据结构"><a aria-hidden="true" tabindex="-1" href="#数据结构" class="anchor"><span class="icon icon-link"></span></a>数据结构</h2>
        <h3 id="变量定义"><a aria-hidden="true" tabindex="-1" href="#变量定义" class="anchor"><span class="icon icon-link"></span></a>变量定义</h3>
        <ul>
          <li>
            <p>类型声明</p>
            <ul>
              <li>
                <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> FreezingC <span class="token builtin">float64</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">type</span> Fahrenheit <span class="token builtin">float64</span>
</span></code><input type="hidden" value="type FreezingC float64
type Fahrenheit float64
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
              </li>
              <li>
                <p>FreezingC Fahrenheit虽然底层都相同，都是float64，但是仍然不是同一种类型，进行计算时需要显示类型转换</p>
              </li>
              <li>
                <p><strong>Go中不具有隐式类型转换</strong></p>
              </li>
            </ul>
          </li>
          <li>
            <p>全局变量如果要在包外访问，首字母需要大写，golang是<strong>以首字母大小</strong>写来区分对包外是否可见。</p>
          </li>
        </ul>
        <h3 id="常量"><a aria-hidden="true" tabindex="-1" href="#常量" class="anchor"><span class="icon icon-link"></span></a>常量</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"hello"</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="3">    e <span class="token operator">=</span> <span class="token number">1.2323</span>
</span><span class="code-line line-number" line="4">    p <span class="token operator">=</span> <span class="token number">2312</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">)</span>
</span></code><input type="hidden" value="const str = &#x22;hello&#x22;
const(
    e = 1.2323
    p = 2312
)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>常量不能用 <code>:=</code></li>
          <li>保证在编译阶段就计算出表达式的值，不需要等到运行阶段。</li>
          <li>常量并不从属于任何具体类型，所以常量在声明时不说类型。</li>
        </ul>
        <h3 id="字符串"><a aria-hidden="true" tabindex="-1" href="#字符串" class="anchor"><span class="icon icon-link"></span></a>字符串</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">s <span class="token operator">:=</span> <span class="token string">"hello world"</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">var</span> s <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"hello world"</span>
</span><span class="code-line line-number" line="3">s2 <span class="token operator">:=</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment">// 创建[0,5)的子串</span>
</span></code><input type="hidden" value="s := &#x22;hello world&#x22;
var s string = &#x22;hello world&#x22;
s2 := s[0:5] // 创建[0,5)的子串
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>Go中区别<code>" "</code> 和 <code>' '</code> 前者表示string，后者表示byte类型。</li>
          <li>Go中string相当于<strong>只读byte类似数组</strong>，需要转换为<code>[]byte</code> 字节切片。
            <ul>
              <li>两个字符串通过+=语句修改，是将新字符串赋值给变量</li>
              <li>两个字符串可以安全共用一段底层内存</li>
              <li>当发生+=，实际上是指向了新的内存地址，原来的底层没有发生变更</li>
            </ul>
          </li>
          <li>string和byte不能直接运算拼接，需要使用显示类型转换。</li>
        </ul>
        <h3 id="rune"><a aria-hidden="true" tabindex="-1" href="#rune" class="anchor"><span class="icon icon-link"></span></a>rune</h3>
        <p>在Go语言当中，字符的概念被称为 <code>rune</code> - 它是一个表示 Unicode 编码的整数。</p>
        <h3 id="指针"><a aria-hidden="true" tabindex="-1" href="#指针" class="anchor"><span class="icon icon-link"></span></a>指针</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
</span><span class="code-line line-number" line="2">p <span class="token operator">:=</span> <span class="token operator">&#x26;</span>a
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">var</span> a <span class="token operator">*</span><span class="token builtin">int</span>
</span></code><input type="hidden" value="var a int = 5
p := &#x26;a

var a *int
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>用<code>&#x26;</code>取地址，用<code>*</code>取地址中的值</li>
          <li>在打印时，用<code>&#x26;</code>特殊标记，这是一个指针变量。</li>
          <li>当你传值给函数或方法时，Go 会复制这些值。因此，如果你写的函数需要更改状态，你就需要用指针指向你想要更改的值</li>
        </ul>
        <h3 id="数组"><a aria-hidden="true" tabindex="-1" href="#数组" class="anchor"><span class="icon icon-link"></span></a>数组</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">modify</span><span class="token punctuation">(</span>array <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"another"</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token function">modify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="array := [3]string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}

array := [...]string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}

func modify(array [5]string){
    array[0] = &#x22;another&#x22;
}

modify(array)

a := [2][3]int{
    {1, 1, 1},
    {2, 2, 2}
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>初始化后长度不可变</li>
          <li>数组的长度len和空间cap，一定是相等的</li>
          <li>数组在Go中为值类型</li>
          <li>长度不同的数组，是不同的类型</li>
        </ul>
        <h3 id="slice"><a aria-hidden="true" tabindex="-1" href="#slice" class="anchor"><span class="icon icon-link"></span></a>Slice</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">newSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span>）
</span><span class="code-line line-number" line="5"><span class="token comment">// len = cap = 2</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">newSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token comment">// len = 2, cap = 100</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">multSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">multSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>multSlice<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13">multSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>multSlice<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="14">multSlice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
</span></code><input type="hidden" value="slice := []string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}


newSlice := make([]int, 2）
// len = cap = 2

newSlice := make([]int, 2, 100)
// len = 2, cap = 100

multSlice := make([][]int, 0)

multSlice = append(multSlice, []int{1,2,3})
multSlice = append(multSlice, []int{2,2,3})
multSlice[0][1] = 100
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>Slice是一个结构体，指向底层的数组</li>
          <li>区别一般数组，是否指定数组的大小。是一种动态数组，长度可变
            <ul>
              <li>cap：申请的空间</li>
              <li>len：实际使用的空间</li>
              <li>扩容：cap == len时，对cap进行翻倍扩容，<strong>重新分配内存地址，但是减小大小，不会改变地址</strong></li>
            </ul>
          </li>
          <li>slice不能直接比较，range一个比较或者使用<code>reflect.DeepEqual</code>
            <ul>
              <li>注意reflect.DeepEqual是类型不安全的</li>
              <li>比较string和slice，能通过编译是不合理的</li>
            </ul>
          </li>
        </ul>
        <h3 id="byte"><a aria-hidden="true" tabindex="-1" href="#byte" class="anchor"><span class="icon icon-link"></span></a>Byte</h3>
        <ul>
          <li>uint8的别名</li>
        </ul>
        <h3 id="map"><a aria-hidden="true" tabindex="-1" href="#map" class="anchor"><span class="icon icon-link"></span></a>Map</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 创建一个变量</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span>sting<span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token string">"ming"</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">    <span class="token string">"zhangsan"</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token comment">// 二维</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="11">m <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12"><span class="token comment">// 分布初始化</span>
</span><span class="code-line line-number" line="13">m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="14">m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"OK"</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">a，ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="17"><span class="token keyword">if</span> <span class="token operator">!</span>ok<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="18">    m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">score<span class="token punctuation">,</span> err <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"ming"</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="23"><span class="token comment">//访问时返回值和是否存在（true or false)</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25"><span class="token comment">//注意这边的value知识一个拷贝，不对实际产生影响</span>
</span><span class="code-line line-number" line="26"><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> m<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="27">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"%s\t %d\t"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="28"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="29">
</span><span class="code-line line-number" line="30"><span class="token comment">// 删除</span>
</span><span class="code-line line-number" line="31"><span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"ming"</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="// 创建一个变量
var m map[int]string = make(map[int]string)

m := map[sting]int{
    &#x22;ming&#x22;:10,
    &#x22;zhangsan&#x22;:13,
}

// 二维
var m map[int]map[int]string
m = make(map[int]map[int]string)
// 分布初始化
m[1] = make(map[int]string)
m[1][1] = &#x22;OK&#x22;

a，ok := m[2][1]
if !ok{
    m[2] = make(map[int]string)
}


score, err := m[&#x22;ming&#x22;]
//访问时返回值和是否存在（true or false)

//注意这边的value知识一个拷贝，不对实际产生影响
for key, value := range m{
    fmt.Println(&#x22;%s\t %d\t&#x22;, key, value)
}

// 删除
delete(m, &#x22;ming&#x22;)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>存储一系列无序的键值对，基于键来存储值</li>
          <li>传参时，还是指针，与切片相等，会改变底层的内容</li>
          <li>无序访问</li>
        </ul>
        <h3 id="struct"><a aria-hidden="true" tabindex="-1" href="#struct" class="anchor"><span class="icon icon-link"></span></a>Struct</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> person <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3">    Age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token comment">//a := person{}</span>
</span><span class="code-line line-number" line="8">    <span class="token comment">//a.Name = "joe"</span>
</span><span class="code-line line-number" line="9">    <span class="token comment">//a.Age = 19</span>
</span><span class="code-line line-number" line="10">    a <span class="token operator">:=</span> <span class="token operator">&#x26;</span>person<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">        Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="12">        Age<span class="token punctuation">:</span> <span class="token number">19</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">    a<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">20</span>
</span><span class="code-line line-number" line="15"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17"><span class="token comment">// 匿名结构</span>
</span><span class="code-line line-number" line="18"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">    a <span class="token operator">:=</span> <span class="token operator">&#x26;</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">        Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="21">        Age
</span><span class="code-line line-number" line="22">    <span class="token punctuation">}</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">        Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="24">        Age<span class="token punctuation">:</span> <span class="token number">19</span>
</span><span class="code-line line-number" line="25">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26">    
</span><span class="code-line line-number" line="27"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type person struct{
    Name string
    Age int
}

func main() {
    //a := person{}
    //a.Name = &#x22;joe&#x22;
    //a.Age = 19
    a := &#x26;person{
        Name: &#x22;joe&#x22;,
        Age: 19
    }
    a.Age = 20
}

// 匿名结构
func main(){
    a := &#x26; struct{
        Name string
        Age
    }{
        Name: &#x22;joe&#x22;,
        Age: 19
    }
    
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>普通传递是值传递，所以开始就加&#x26;，取地址，方便后续使用，避免每一次使用取地址</p>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> human <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    Sex <span class="token builtin">int</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">type</span> teacher <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    human
</span><span class="code-line line-number" line="7">    Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="8">    Age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">a <span class="token operator">:=</span> teacher<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> human<span class="token punctuation">:</span> human<span class="token punctuation">{</span>Sex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12">a<span class="token punctuation">.</span>Sex <span class="token operator">=</span> <span class="token number">1</span>
</span></code><input type="hidden" value="type human struct{
    Sex int
}

type teacher struct{
    human
    Name string
    Age int
}

a := teacher{Name: &#x22;joe&#x22;, Age: 19, human: human{Sex:0}}
a.Sex = 1
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>支持嵌套</p>
        </blockquote>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">sm1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="3">    m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">sm2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="8">    m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">if</span> sm1 <span class="token operator">==</span> sm2 <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"sm1 == sm2"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="sm1 := struct {
    age int
    m   map[string]string
}{age: 11, m: map[string]string{&#x22;a&#x22;: &#x22;1&#x22;}}

sm2 := struct {
    age int
    m   map[string]string
}{age: 11, m: map[string]string{&#x22;a&#x22;: &#x22;1&#x22;}}

if sm1 == sm2 {
    fmt.Println(&#x22;sm1 == sm2&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>只有相同类型的结构体才可以比较，结构体是否相同不但与属性类型个数有关，还与属性顺序相关.</li>
            <li>此外构体属性中有不可以比较的类型，如<code>map</code>,<code>slice</code>，则结构体不能用<code>==</code>比较。应该使用<code>reflect.DeepEqual(s1,s2)</code></li>
          </ul>
        </blockquote>
        <h3 id="json"><a aria-hidden="true" tabindex="-1" href="#json" class="anchor"><span class="icon icon-link"></span></a>JSON</h3>
        <h2 id="泛型"><a aria-hidden="true" tabindex="-1" href="#泛型" class="anchor"><span class="icon icon-link"></span></a>泛型</h2>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// K, V是类型参数</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> MapKeys<span class="token punctuation">[</span>K comparable<span class="token punctuation">,</span> V any<span class="token punctuation">]</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span>K<span class="token punctuation">]</span>V<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>K <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">	r <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>K<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8">	<span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">		r <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token comment">// 复制key值</span>
</span><span class="code-line line-number" line="10">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11">	<span class="token keyword">return</span> r
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">type</span> List<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">	head<span class="token punctuation">,</span> tail <span class="token operator">*</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">type</span> element<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">	next <span class="token operator">*</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span>
</span><span class="code-line line-number" line="20">	val  T
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token comment">// 使用时必须保留类型参数</span>
</span><span class="code-line line-number" line="24"><span class="token keyword">func</span> <span class="token punctuation">(</span>lst <span class="token operator">*</span>List<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">Push</span><span class="token punctuation">(</span>v T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="25">	<span class="token keyword">if</span> lst<span class="token punctuation">.</span>tail <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">		lst<span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token operator">&#x26;</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> v<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="27">		lst<span class="token punctuation">.</span>tail <span class="token operator">=</span> lst<span class="token punctuation">.</span>head
</span><span class="code-line line-number" line="28">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">		lst<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token operator">&#x26;</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> v<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="30">		lst<span class="token punctuation">.</span>tail <span class="token operator">=</span> lst<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next
</span><span class="code-line line-number" line="31">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="32"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number" line="34"><span class="token keyword">func</span> <span class="token punctuation">(</span>lst <span class="token operator">*</span>List<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>T <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="35">	<span class="token keyword">var</span> elems <span class="token punctuation">[</span><span class="token punctuation">]</span>T
</span><span class="code-line line-number" line="36">	<span class="token keyword">for</span> e <span class="token operator">:=</span> lst<span class="token punctuation">.</span>head<span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">;</span> e <span class="token operator">=</span> e<span class="token punctuation">.</span>next <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="37">		elems <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> e<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="38">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="39">	<span class="token keyword">return</span> elems
</span><span class="code-line line-number" line="40"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="41">
</span><span class="code-line line-number" line="42"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="43">	<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">"8"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="44">
</span><span class="code-line line-number" line="45">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"keys m:"</span><span class="token punctuation">,</span> <span class="token function">MapKeys</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="46">
</span><span class="code-line line-number" line="47">	<span class="token comment">// 可以不用指定类型参数</span>
</span><span class="code-line line-number" line="48">	<span class="token boolean">_</span> <span class="token operator">=</span> MapKeys<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="49">
</span><span class="code-line line-number" line="50">	lst <span class="token operator">:=</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="51">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="52">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="53">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="54">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"list:"</span><span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="55"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="56">
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

// K, V是类型参数
func MapKeys[K comparable, V any](m map[K]V) []K {
	r := make([]K, 0, len(m))
	for k := range m {
		r = append(r, k) // 复制key值
	}
	return r
}

type List[T any] struct {
	head, tail *element[T]
}

type element[T any] struct {
	next *element[T]
	val  T
}

// 使用时必须保留类型参数
func (lst *List[T]) Push(v T) {
	if lst.tail == nil {
		lst.head = &#x26;element[T]{val: v}
		lst.tail = lst.head
	} else {
		lst.tail.next = &#x26;element[T]{val: v}
		lst.tail = lst.tail.next
	}
}

func (lst *List[T]) GetAll() []T {
	var elems []T
	for e := lst.head; e != nil; e = e.next {
		elems = append(elems, e.val)
	}
	return elems
}

func main() {
	var m = map[int]string{1: &#x22;2&#x22;, 2: &#x22;4&#x22;, 4: &#x22;8&#x22;}

	fmt.Println(&#x22;keys m:&#x22;, MapKeys(m))

	// 可以不用指定类型参数
	_ = MapKeys[int, string](m)

	lst := List[int]{}
	lst.Push(10)
	lst.Push(13)
	lst.Push(23)
	fmt.Println(&#x22;list:&#x22;, lst.GetAll())
}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="错误处理"><a aria-hidden="true" tabindex="-1" href="#错误处理" class="anchor"><span class="icon icon-link"></span></a>错误处理</h2>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token punctuation">(</span>
</span><span class="code-line line-number" line="4">	<span class="token string">"errors"</span>
</span><span class="code-line line-number" line="5">	<span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token keyword">func</span> <span class="token function">f1</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">	<span class="token keyword">if</span> arg <span class="token operator">==</span> <span class="token number">42</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"can't work with 42"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">	<span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">type</span> argError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">	arg  <span class="token builtin">int</span>
</span><span class="code-line line-number" line="20">	prob <span class="token builtin">string</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>argError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%d - %s"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>arg<span class="token punctuation">,</span> e<span class="token punctuation">.</span>prob<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27"><span class="token keyword">func</span> <span class="token function">f2</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="28">	<span class="token keyword">if</span> arg <span class="token operator">==</span> <span class="token number">42</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">
</span><span class="code-line line-number" line="30">		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&#x26;</span>argError<span class="token punctuation">{</span>arg<span class="token punctuation">,</span> <span class="token string">"can't work with it"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="32">	<span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
</span><span class="code-line line-number" line="33"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">
</span><span class="code-line line-number" line="37">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="38">		<span class="token keyword">if</span> r<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f1</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="39">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 failed:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="40">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="41">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 worked:"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="42">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="43">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="44">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="45">		<span class="token keyword">if</span> r<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f2</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="46">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 failed:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="47">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="48">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 worked:"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="49">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="50">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="51">
</span><span class="code-line line-number" line="52">	<span class="token boolean">_</span><span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="53">	<span class="token keyword">if</span> ae<span class="token punctuation">,</span> ok <span class="token operator">:=</span> e<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>argError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="54">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ae<span class="token punctuation">.</span>arg<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="55">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ae<span class="token punctuation">.</span>prob<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="56">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="57"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="58">
</span></code><input type="hidden" value="package main

import (
	&#x22;errors&#x22;
	&#x22;fmt&#x22;
)

func f1(arg int) (int, error) {
	if arg == 42 {

		return -1, errors.New(&#x22;can&#x27;t work with 42&#x22;)

	}

	return arg + 3, nil
}

type argError struct {
	arg  int
	prob string
}

func (e *argError) Error() string {
	return fmt.Sprintf(&#x22;%d - %s&#x22;, e.arg, e.prob)
}

func f2(arg int) (int, error) {
	if arg == 42 {

		return -1, &#x26;argError{arg, &#x22;can&#x27;t work with it&#x22;}
	}
	return arg + 3, nil
}

func main() {

	for _, i := range []int{7, 42} {
		if r, e := f1(i); e != nil {
			fmt.Println(&#x22;f1 failed:&#x22;, e)
		} else {
			fmt.Println(&#x22;f1 worked:&#x22;, r)
		}
	}
	for _, i := range []int{7, 42} {
		if r, e := f2(i); e != nil {
			fmt.Println(&#x22;f2 failed:&#x22;, e)
		} else {
			fmt.Println(&#x22;f2 worked:&#x22;, r)
		}
	}

	_, e := f2(42)
	if ae, ok := e.(*argError); ok {
		fmt.Println(ae.arg)
		fmt.Println(ae.prob)
	}
}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>按照惯例，错误通常是最后一个返回值并且是 <code>error</code> 类型，它是一个内建的接口。</li>
          <li>返回错误值为 nil 代表没有错误。</li>
          <li>你还可以通过实现 <code>Error()</code> 方法来自定义 <code>error</code> 类型。 这里使用自定义错误类型来表示上面例子中的参数错误。</li>
          <li>在程序中使用自定义错误类型的数据， 你需要通过类型断言来得到这个自定义错误类型的实例。</li>
        </ul>
        <h2 id="控制语句"><a aria-hidden="true" tabindex="-1" href="#控制语句" class="anchor"><span class="icon icon-link"></span></a>控制语句</h2>
        <h3 id="switch"><a aria-hidden="true" tabindex="-1" href="#switch" class="anchor"><span class="icon icon-link"></span></a>switch</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    a <span class="token operator">:=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">switch</span> a <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">case</span> a <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="5">         fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">         <span class="token keyword">fallthrough</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="8">    
</span><span class="code-line line-number" line="9">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    a := 1
    switch a {
    case a >= 0:
         fmt.Println(&#x22;a&#x22;)
         fallthrough
    case 1:
    
    }

}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>如果switch不加语句块，希望判断每一个case条件，使用fallthrough</li>
          <li>默认下一个case满足，会跳出这个switch</li>
          <li>当有很多个if语句检查特定的值，通常用switch语句来代替</li>
        </ul>
        <h3 id="for-range-引用"><a aria-hidden="true" tabindex="-1" href="#for-range-引用" class="anchor"><span class="icon icon-link"></span></a>for range 引用</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> url <span class="token operator">:=</span> <span class="token keyword">range</span> urls <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">        results<span class="token punctuation">[</span>url<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">wc</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="for _, url := range urls {
    go func() {
        results[url] = wc(url)
    }()
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>注意这里url每次从urls获取新值，但是每个 goroutine 都是 <code>url</code> 变量的引用 —— 它们没有自己的独立副本。</li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> url <span class="token operator">:=</span> <span class="token keyword">range</span> urls <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span>u <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">        results<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">wc</span><span class="token punctuation">(</span>u<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token punctuation">}</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="for _, url := range urls {
    go func(u string) {
        results[u] = wc(u)
    }(url)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>用 <code>url</code> 作为参数调用匿名函数，我们确保 <code>u</code> 的值固定为循环迭代的 <code>url</code> 值，重新启动 <code>goroutine</code>。<code>u</code> 是 <code>url</code> 值的副本，因此无法更改。</li>
          <li>通过创建新变量赋值使用，而不是引用</li>
        </ul>
        <h2 id="函数"><a aria-hidden="true" tabindex="-1" href="#函数" class="anchor"><span class="icon icon-link"></span></a>函数</h2>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 不定长变参，这是拷贝值</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span>b <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 拷贝地址</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span>b <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 不定长变参，这是拷贝值
func A(b string, a ...int){
    

}

// 拷贝地址
func A(b string, a []int){


}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>Go函数不支持嵌套、重载和默认参数</li>
            <li>无需声明原型、不定长度变参、多返回值、命名返回值参数</li>
          </ul>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    a <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">    <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    a := func(){
        fmt.Println(&#x22;A&#x22;)
    }
    a()
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>A 是一个<strong>函数类型变量</strong>，当作函数一样调用</p>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    f <span class="token operator">:=</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">closure</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token keyword">return</span> x <span class="token operator">+</span> y
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    f := closure(10)
    fmt.Println(f(1))
}
func closure(x int) func(int) int{
    return func(y int) int {
        return x + y
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>返回值是一个函数，x是声明时给的值，y是后传入的值</p>
        </blockquote>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token comment">/*
</span></span><span class="code-line line-number" line="4"><span class="token comment">    下面代码是否编译通过?
</span></span><span class="code-line line-number" line="5"><span class="token comment">*/</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">,</span><span class="token boolean">nil</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">    num<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"num = "</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

/*
    下面代码是否编译通过?
*/
func myFunc(x,y int)(sum int,error){
    return x+y,nil
}

func main() {
    num, err := myFunc(1, 2)
    fmt.Println(&#x22;num = &#x22;, num)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>在函数有多个返回值时，只要有一个返回值有指定命名，其他的也必须命名</li>
            <li>如果返回值有有多个返回值必须加上括号</li>
            <li>如果只有一个返回值并且有命名也需要加上括号</li>
          </ul>
        </blockquote>
        <h3 id="defer"><a aria-hidden="true" tabindex="-1" href="#defer" class="anchor"><span class="icon icon-link"></span></a>Defer</h3>
        <ol>
          <li>
            <p>延迟函数什么时候被调用</p>
            <ul>
              <li>函数return的时候</li>
              <li>发生panic时候</li>
            </ul>
          </li>
          <li>
            <p>延迟调用的语法规则</p>
            <ul>
              <li>defer关键字后面表达式必须是函数或者方法的调用</li>
              <li>延迟内容不能被括号括起来</li>
            </ul>
          </li>
          <li>
            <p>defer语句执行的顺序是先见后出LIFO</p>
          </li>
        </ol>
        <hr>
        <p>defer用于资源的释放，会在函数返回之前进行调用。一般采用如下模式：</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">f<span class="token punctuation">,</span>err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>filename<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token function">panic</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">defer</span> f<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="f,err := os.Open(filename)
if err != nil {
    panic(err)
}
defer f.Close()
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>要使用defer时不踩坑，最重要的一点就是要明白，<strong>return xxx这一条语句并不是一条原子指令!</strong></p>
        <p>函数返回的过程是这样的：<strong>先给返回值赋值，然后调用defer表达式，最后才是返回到调用函数中。</strong></p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>result <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">     <span class="token comment">// result = 0  //return语句不是一条原子调用，return xxx其实是赋值＋ret指令</span>
</span><span class="code-line line-number" line="3">     <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//defer被插入到return之前执行，也就是赋返回值和ret指令之间</span>
</span><span class="code-line line-number" line="4">         result<span class="token operator">++</span>
</span><span class="code-line line-number" line="5">     <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">     <span class="token keyword">return</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token keyword">func</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>r <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">     t <span class="token operator">:=</span> <span class="token number">5</span>
</span><span class="code-line line-number" line="11">     <span class="token comment">// r = t //赋值指令</span>
</span><span class="code-line line-number" line="12">     <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">//defer被插入到赋值与返回之间执行，这个例子中返回值r没被修改过</span>
</span><span class="code-line line-number" line="13">         t <span class="token operator">=</span> t <span class="token operator">+</span> <span class="token number">5</span>
</span><span class="code-line line-number" line="14">     <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="15">     <span class="token keyword">return</span>        <span class="token comment">//空的return指令 return t</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">func</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">	<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="20">    <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">"num is %d"</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="21">    
</span><span class="code-line line-number" line="22">    num <span class="token operator">=</span> <span class="token number">2</span> 
</span><span class="code-line line-number" line="23">    <span class="token keyword">return</span>
</span><span class="code-line line-number" line="24"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="25">
</span><span class="code-line line-number" line="26"><span class="token keyword">func</span> <span class="token function">deferRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span>res <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="27">    num <span class="token operator">:=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="28">    
</span><span class="code-line line-number" line="29">    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="30">		res<span class="token operator">++</span>
</span><span class="code-line line-number" line="31">    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="32">    <span class="token keyword">return</span> num
</span><span class="code-line line-number" line="33"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func f() (result int) {
     // result = 0  //return语句不是一条原子调用，return xxx其实是赋值＋ret指令
     func() { //defer被插入到return之前执行，也就是赋返回值和ret指令之间
         result++
     }()
     return
}

func f() (r int) {
     t := 5
     // r = t //赋值指令
     func() {        //defer被插入到赋值与返回之间执行，这个例子中返回值r没被修改过
         t = t + 5
     }
     return        //空的return指令 return t
}

func f(){
	var num = 1
    defer fmt.Printf(&#x22;num is %d&#x22;, num)
    
    num = 2 
    return
}

func deferRun()(res int){
    num := 1
    
    defer func() {
		res++
    }()
    return num
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>例子1，返回值变量已经定义了，先复制result = 0，改变result值</li>
          <li>例子2，要返回的是r，执行一次r = t，再执行defer，实际不改变r的值</li>
          <li>例子3，defer出现时，参数num已经确定了，后面无法修改</li>
          <li>例子4，例子3中如果使用指针，传递时地址，地址没变，但是地址内的值可以发生改变</li>
          <li>例子5，这里先执行res = num = 1，再执行res++= 2</li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">deferRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">var</span> num <span class="token builtin">int</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">      num<span class="token operator">++</span>  
</span><span class="code-line line-number" line="5">    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">    
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func deferRun() int{
    var num int
    defer func(){
      num++  
    }()
    
    return 1
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>return设置返回值res = 1，defer num+ 1，第三步将res返回，不受影响仍然是1</li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">deferRun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    num <span class="token operator">:=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">      num<span class="token operator">++</span>  
</span><span class="code-line line-number" line="5">    <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">    
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> num
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func deferRun() int{
    num := 1
    defer func(){
      num++  
    }()
    
    return num
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>同样，先设置return res = num，对num影响不改变res</li>
        </ul>
        <p>区别匿名函数和有名函数的，返回值的区别，记住先赋值、再defer、最后返回。</p>
        <h3 id="panic"><a aria-hidden="true" tabindex="-1" href="#panic" class="anchor"><span class="icon icon-link"></span></a>Panic</h3>
        <ul>
          <li>单独panic发生后，后续不会执行，配合defer中包含recover函数进行恢复
            <ul>
              <li>因为defer无论如何都会执行，所以发生panic后，把recover放到defer中</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">Demo</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">	<span class="token comment">//定义10个元素的数组</span>
</span><span class="code-line line-number" line="7">	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</span><span class="code-line line-number" line="8">	<span class="token comment">//错误拦截要在产生错误前设置</span>
</span><span class="code-line line-number" line="9">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">		<span class="token comment">//设置recover拦截错误信息</span>
</span><span class="code-line line-number" line="11">		err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">		<span class="token comment">//产生panic异常  打印错误信息</span>
</span><span class="code-line line-number" line="13">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="15">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="17">	<span class="token comment">//根据函数参数为数组元素赋值</span>
</span><span class="code-line line-number" line="18">	<span class="token comment">//如果i的值超过数组下标 会报错误：数组下标越界</span>
</span><span class="code-line line-number" line="19">	arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">	<span class="token function">Demo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25">	<span class="token comment">//产生错误后 程序继续</span>
</span><span class="code-line line-number" line="26">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"程序继续执行..."</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="27"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func Demo(i int) {
	//定义10个元素的数组
	var arr [10]int
	//错误拦截要在产生错误前设置
	defer func() {
		//设置recover拦截错误信息
		err := recover()
		//产生panic异常  打印错误信息
		if err != nil {
			fmt.Println(err)
		}
	}()
	//根据函数参数为数组元素赋值
	//如果i的值超过数组下标 会报错误：数组下标越界
	arr[i] = 10

}

func main() {
	Demo(10)
	//产生错误后 程序继续
	fmt.Println(&#x22;程序继续执行...&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="可变参数函数"><a aria-hidden="true" tabindex="-1" href="#可变参数函数" class="anchor"><span class="icon icon-link"></span></a>可变参数函数</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>nums <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">    total <span class="token operator">:=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="8">    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">        total <span class="token operator">+=</span> num
</span><span class="code-line line-number" line="10">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="17">    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">
</span><span class="code-line line-number" line="19">    nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">    <span class="token function">sum</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func sum(nums ...int) {
    fmt.Print(nums, &#x22; &#x22;)
    total := 0
    for _, num := range nums {
        total += num
    }
    fmt.Println(total)
}

func main() {

    sum(1, 2)
    sum(1, 2, 3)

    nums := []int{1, 2, 3, 4}
    sum(nums...)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="闭包"><a aria-hidden="true" tabindex="-1" href="#闭包" class="anchor"><span class="icon icon-link"></span></a>闭包</h3>
        <p>匿名函数在你想定义一个不需要命名的内联函数时是很实用的。</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    i <span class="token operator">:=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">        i<span class="token operator">++</span>
</span><span class="code-line line-number" line="9">        <span class="token keyword">return</span> i
</span><span class="code-line line-number" line="10">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    nextInt <span class="token operator">:=</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="19">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">    newInts <span class="token operator">:=</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="22">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">newInts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="23"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func intSeq() func() int {
    i := 0
    return func() int {
        i++
        return i
    }
}

func main() {

    nextInt := intSeq()

    fmt.Println(nextInt())
    fmt.Println(nextInt())
    fmt.Println(nextInt())

    newInts := intSeq()
    fmt.Println(newInts())
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>nextInt拥有属于自己的i，每次调用返回同一个i。</li>
        </ul>
        <h2 id="方法"><a aria-hidden="true" tabindex="-1" href="#方法" class="anchor"><span class="icon icon-link"></span></a>方法</h2>
        <p>是某种特定类型的函数。</p>
        <ul>
          <li>同名方法，不能根据形参的类型进行重载</li>
          <li>对于type定义，也可以使用附加特定的方法</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a TZ
</span><span class="code-line line-number" line="2"><span class="token comment">//method value</span>
</span><span class="code-line line-number" line="3">a<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4"><span class="token comment">//method expression</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">(</span><span class="token operator">*</span>TZ<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>a<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>TZ<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Tz"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="var a TZ
//method value
a.Print()
//method expression
(*TZ).Print(&#x26;a)

func (a *TZ) Print(){
    fmt.Println(&#x22;Tz&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="interface与类型断言"><a aria-hidden="true" tabindex="-1" href="#interface与类型断言" class="anchor"><span class="icon icon-link"></span></a>interface与类型断言</h2>
        <p>一个数据通过func funcName(interface{})的方式传进来的时候，也就意味着这个参数被自动的转为interface{}的类型。</p>
        <p>在我们使用时，应该进行断言</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Where are you,Jonny?"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="var a interface{}

fmt.Println(&#x22;Where are you,Jonny?&#x22;, a.(string))
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>但是直接断言，错误会发生panic，所以一般在断言前进行一定的判断</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="value, ok := a.(string)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"It's not ok for type string"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">return</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The value is "</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</span></code><input type="hidden" value="value, ok := a.(string)
if !ok {
    fmt.Println(&#x22;It&#x27;s not ok for type string&#x22;)
    return
}
fmt.Println(&#x22;The value is &#x22;, value)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>类型断言用于判断一个<strong>接口对象是否实现了特定的接口</strong>，并且获取其对应的实际值。在这段代码中，<code>r.(io.Writer)</code>是一种类型断言，用于判断<code>r</code>是否实现了<code>io.Writer</code>接口，并将其转换为<code>io.Writer</code>类型的实例赋值给变量<code>w</code>。</p>
        <p>而类型强制转换是将一个数据从一种类型转换为另一种类型，这通常在非接口类型之间进行。例如，将一个整数类型转换为浮点数类型，或者将一个字符串类型转换为字节切片类型等。</p>
        <h2 id="接口"><a aria-hidden="true" tabindex="-1" href="#接口" class="anchor"><span class="icon icon-link"></span></a>接口</h2>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">type</span> USB <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</span><span class="code-line line-number" line="7">    <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token keyword">type</span> PhoneConnecter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">    name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">func</span> <span class="token punctuation">(</span>pc PhoneConnecter<span class="token punctuation">)</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">    <span class="token keyword">return</span> pc<span class="token punctuation">.</span>name
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">func</span> <span class="token punctuation">(</span>pc PhoneConnecter<span class="token punctuation">)</span> <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Connect:"</span><span class="token punctuation">,</span> pc<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">    a <span class="token operator">:=</span> PhoneConnecter<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"xiaocai"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="24">    a<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25">    <span class="token function">Disconnect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="26"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnext."</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="30"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

type USB interface {
    Name() string
    Connect()
}

type PhoneConnecter struct {
    name string
}

func (pc PhoneConnecter) Name() string {
    return pc.name
}

func (pc PhoneConnecter) Connect() {
    fmt.Println(&#x22;Connect:&#x22;, pc.name)
}

func main() {
    a := PhoneConnecter{name: &#x22;xiaocai&#x22;}
    a.Connect()
    Disconnect(a)
}

func Disconnect(usb USB) {
    fmt.Println(&#x22;Disconnext.&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>一般把接口类型名后面加上<code>er</code>，接口作为函数参数时，任何满足这个接口的变量类型都可以传入</li>
          <li>接口是一个或多个方法签名的集合
            <ul>
              <li>USB这个接口含有name、Connect两个方法</li>
              <li>只有方法声明，没有实现，没有数据字段</li>
            </ul>
          </li>
          <li>只要某个类型拥有该接口的所有方法签名，即算实现该接口，无需显示声明实现了哪个接口，这称为Structural Typing
            <ul>
              <li>PhoneConnecter实现了USB这个接口中的name，Connect方法，就算实现了该接口</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> USB <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3">    Connecter
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">type</span> Connecter <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type USB interface {
    Name() string
    Connecter
}

type Connecter interface {
    Connect()
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>接口可以匿名嵌入其它接口，或嵌入到结构中</li>
          <li>也同时满足struct的嵌入，struct中嵌入一个满足接口类型的类型，那么整体新的struct也满足这个接口</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">if</span> pc<span class="token punctuation">,</span> ok <span class="token operator">:=</span> usb<span class="token punctuation">.</span><span class="token punctuation">(</span>PhoneConnecter<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnect:"</span><span class="token punctuation">,</span> pc<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">       <span class="token keyword">return</span>
</span><span class="code-line line-number" line="5">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Unknown device"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func Disconnect(usb USB) {
    if pc, ok := usb.(PhoneConnecter); ok {
       fmt.Println(&#x22;Disconnect:&#x22;, pc.name)
       return
    }
    fmt.Println(&#x22;Unknown device&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>对接口类型的断言</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> empty <span class="token keyword">interface</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type empty interface{

}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>空接口，任何类型都实现了</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">switch</span> v <span class="token operator">:=</span> usb<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">case</span> PhoneConnecter<span class="token punctuation">:</span>
</span><span class="code-line line-number" line="4">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnect:"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">default</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="6">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Unknown device"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func Disconnect(usb USB) {
    switch v := usb.(type) {
    case PhoneConnecter:
       fmt.Println(&#x22;Disconnect:&#x22;, v.name)
    default:
       fmt.Println(&#x22;Unknown device&#x22;)
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>当接口的类型过多时，使用<code>type switch</code></li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> tvConnecter <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token punctuation">(</span>tv  tvConnecter<span class="token punctuation">)</span>Connect<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token operator">...</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">tv <span class="token operator">:=</span> tvConnecter<span class="token punctuation">{</span><span class="token string">"1234"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">var</span> a USB
</span><span class="code-line line-number" line="11">a <span class="token operator">=</span> <span class="token function">USB</span><span class="token punctuation">(</span>tv<span class="token punctuation">)</span> <span class="token comment">//error</span>
</span></code><input type="hidden" value="type tvConnecter struct{
    name string
}

func (tv  tvConnecter)Connect{
    ...
}

tv := tvConnecter{&#x22;1234&#x22;}
var a USB
a = USB(tv) //error
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>超级接口PhoneConnecter可以转换为下级接口，反之Connecter不可以转换为PhoneConnecter
            <ul>
              <li>也就是只能实现<strong>降级转换</strong></li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">a <span class="token operator">:=</span> PhoneConnecter<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"xiaocai"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">var</span> tmp PhoneConnecter
</span><span class="code-line line-number" line="4">tmp <span class="token operator">=</span> a
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">tmp<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"pc"</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">tmp<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="a := PhoneConnecter{name: &#x22;xiaocai&#x22;}

var tmp PhoneConnecter
tmp = a

tmp.Connect()

a.name = &#x22;pc&#x22;

tmp.Connect()
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>将对象赋值给接口时，会发生拷贝，而接口内部存储的是指向这个复制品的指针，既无法修改复制品的状态，也无法获取指针
            <ul>
              <li>这里tmp收到的是浅拷贝</li>
              <li>a的改动，不会影响tmp</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">Fprintf</span><span class="token punctuation">(</span>w io<span class="token punctuation">.</span>Writer<span class="token punctuation">,</span> format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>n <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    p <span class="token operator">:=</span> <span class="token function">newPrinter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">    p<span class="token punctuation">.</span><span class="token function">doPrintf</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> a<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    n<span class="token punctuation">,</span> err <span class="token operator">=</span> w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>buf<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5">    p<span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">return</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func Fprintf(w io.Writer, format string, a ...interface{}) (n int, err error) {
    p := newPrinter()
    p.doPrintf(format, a)
    n, err = w.Write(p.buf)
    p.free()
    return
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li><code>io.Writer</code> 是一个很好的通用接口，用于「将数据放在某个地方」。</li>
        </ul>
        <h2 id="反射"><a aria-hidden="true" tabindex="-1" href="#反射" class="anchor"><span class="icon icon-link"></span></a>反射</h2>
        <h3 id="是什么"><a aria-hidden="true" tabindex="-1" href="#是什么" class="anchor"><span class="icon icon-link"></span></a>是什么</h3>
        <p>反射是一种机制，在编译时不知道具体类型的情况下，可以透视结构的组成、更新值。使用反射，可以让我们编写出能统一处理所有类型的代码。</p>
        <h3 id="interface和反射"><a aria-hidden="true" tabindex="-1" href="#interface和反射" class="anchor"><span class="icon icon-link"></span></a>interface和反射</h3>
        <p><strong>为什么不通过将所有参数都定义为 interface 类型来得到真正灵活的函数呢？</strong></p>
        <ul>
          <li>作为函数的使用者，使用interface将失去对<strong>类型安全的检查</strong>，并且无法知道传入参数的类型。</li>
          <li>作为这样一个函数的作者，你必须检查传入的 <em>所有</em> 参数，并尝试断定参数类型以及如何处理它们。</li>
        </ul>
        <p>如果你想实现函数的多态性，请考虑是否可以围绕接口（不是 <code>interface</code> 类型，这里容易让人困惑）设计它，以便用户可以用多种类型来调用你的函数，这些类型实现了函数工作所需要的任何方法。</p>
        <h2 id="编写测试"><a aria-hidden="true" tabindex="-1" href="#编写测试" class="anchor"><span class="icon icon-link"></span></a>编写测试</h2>
        <p>编写测试和函数很类似，其中有一些规则</p>
        <ul>
          <li>程序需要在一个名为 <code>xxx_test.go</code> 的文件中编写</li>
          <li>测试函数的命名必须以单词 <code>Test</code> 开始</li>
          <li>测试函数只接受一个参数 <code>t *testing.T</code></li>
        </ul>
        <p>现在这些信息足以让我们明白，类型为 <code>*testing.T</code> 的变量 <code>t</code> 是你在测试框架中的 hook（钩子），所以当你想让测试失败时可以执行 <code>t.Fail()</code> 之类的操作。</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"testing"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">TestHello</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">	<span class="token comment">// 将断言重构为匿名函数，减少重复，提高可读性</span>
</span><span class="code-line line-number" line="8">	assertCorrectMessage <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">		t<span class="token punctuation">.</span><span class="token function">Helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 这是辅助函数,出错显示在调用地方，而不是辅助函数内部</span>
</span><span class="code-line line-number" line="10">		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got '%q' want '%q'"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">	<span class="token comment">// 子测试</span>
</span><span class="code-line line-number" line="16">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"saying hello to people"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="17">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Chris"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">		want <span class="token operator">:=</span> <span class="token string">"Hello, Chris"</span>
</span><span class="code-line line-number" line="19">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"empty string defaults to 'world'"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="24">		want <span class="token operator">:=</span> <span class="token string">"Hello, World"</span>
</span><span class="code-line line-number" line="25">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="26">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"in Spanish"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Elodie"</span><span class="token punctuation">,</span> <span class="token string">"Spanish"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="30">		want <span class="token operator">:=</span> <span class="token string">"Hola, Elodie"</span>
</span><span class="code-line line-number" line="31">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="32">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number" line="34">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"in French"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="35">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Elodie"</span><span class="token punctuation">,</span> <span class="token string">"French"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="36">		want <span class="token operator">:=</span> <span class="token string">"Bonjour, Elodie"</span>
</span><span class="code-line line-number" line="37">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="38">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="39">
</span><span class="code-line line-number" line="40"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="41">
</span></code><input type="hidden" value="package main

import &#x22;testing&#x22;

func TestHello(t *testing.T) {

	// 将断言重构为匿名函数，减少重复，提高可读性
	assertCorrectMessage := func(t *testing.T, got, want string) {
		t.Helper() // 这是辅助函数,出错显示在调用地方，而不是辅助函数内部
		if got != want {
			t.Errorf(&#x22;got &#x27;%q&#x27; want &#x27;%q&#x27;&#x22;, got, want)
		}
	}

	// 子测试
	t.Run(&#x22;saying hello to people&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Chris&#x22;, &#x22;&#x22;)
		want := &#x22;Hello, Chris&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;empty string defaults to &#x27;world&#x27;&#x22;, func(t *testing.T) {
		got := Hello(&#x22;&#x22;, &#x22;&#x22;)
		want := &#x22;Hello, World&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;in Spanish&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Elodie&#x22;, &#x22;Spanish&#x22;)
		want := &#x22;Hola, Elodie&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;in French&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Elodie&#x22;, &#x22;French&#x22;)
		want := &#x22;Bonjour, Elodie&#x22;
		assertCorrectMessage(t, got, want)
	})

}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>重构重复函数，提高代码可读性</li>
          <li>子测试，测试不同的案例</li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">ExampleAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">	sum <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">	<span class="token comment">// Output: 4</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func ExampleAdd() {
	sum := Add(2, 2)
	fmt.Println(sum)
	// Output: 4
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>在同一个包文件中添加<code>_test.go</code>，编写示例代码，提高可读性</li>
          <li>示例代码会作为测试套件的一部分，示例会被编译</li>
          <li>如果删除注释 「//Output: 6」，示例函数将不会执行。虽然函数会被编译，但是它不会执行。</li>
        </ul>
        <h3 id="基准测试"><a aria-hidden="true" tabindex="-1" href="#基准测试" class="anchor"><span class="icon icon-link"></span></a>基准测试</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">BenchmarkRepeat</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">        <span class="token function">Repeat</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func BenchmarkRepeat(b *testing.B) {
    for i := 0; i < b.N; i++ {
        Repeat(&#x22;a&#x22;)
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p><code>testing.B</code> 可使你访问隐性命名（cryptically named）<code>b.N</code>。</p>
        <p>基准测试运行时，代码会运行 <code>b.N</code> 次，并测量需要多长时间。</p>
        <p>代码运行的次数不会对你产生影响，测试框架会选择一个它所认为的最佳值，以便让你获得更合理的结果。</p>
        <p>用 <code>go test -bench=.</code> 来运行基准测试。 (如果在 Windows Powershell 环境下使用 <code>go test -bench="."</code>)</p>
        <h3 id="表格驱动测试"><a aria-hidden="true" tabindex="-1" href="#表格驱动测试" class="anchor"><span class="icon icon-link"></span></a>表格驱动测试</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">TestArea</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">    areaTests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">        shape Shape
</span><span class="code-line line-number" line="5">        want  <span class="token builtin">float64</span>
</span><span class="code-line line-number" line="6">    <span class="token punctuation">}</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token punctuation">{</span>Rectangle<span class="token punctuation">{</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">72.0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="8">        <span class="token punctuation">{</span>Circle<span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">314.1592653589793</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="9">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> tt <span class="token operator">:=</span> <span class="token keyword">range</span> areaTests <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">        got <span class="token operator">:=</span> tt<span class="token punctuation">.</span>shape<span class="token punctuation">.</span><span class="token function">Area</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13">        <span class="token keyword">if</span> got <span class="token operator">!=</span> tt<span class="token punctuation">.</span>want <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">            t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got %.2f want %.2f"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="15">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func TestArea(t *testing.T) {

    areaTests := []struct {
        shape Shape
        want  float64
    }{
        {Rectangle{12, 6}, 72.0},
        {Circle{10}, 314.1592653589793},
    }

    for _, tt := range areaTests {
        got := tt.shape.Area()
        if got != tt.want {
            t.Errorf(&#x22;got %.2f want %.2f&#x22;, got, tt.want)
        }
    }

}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>创建了一个匿名的结构体，用含有两个域 shape 和 want 的 []struct 声明了一个<strong>结构体切片</strong>。然后我们用测试用例去填充这个数组了。</li>
        </ul>
        <h2 id="反射-1"><a aria-hidden="true" tabindex="-1" href="#反射-1" class="anchor"><span class="icon icon-link"></span></a>反射</h2>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#go语言使用" class="tocs-link">Go语言使用</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#获取远程包" class="tocs-link">获取远程包</a></li>
              </ol>
            </li>
            <li><a href="#go-moudle" class="tocs-link">Go Moudle</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#如何使用" class="tocs-link">如何使用</a></li>
                <li><a href="#发布步骤" class="tocs-link">发布步骤</a></li>
              </ol>
            </li>
            <li><a href="#数据结构" class="tocs-link">数据结构</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#变量定义" class="tocs-link">变量定义</a></li>
                <li><a href="#常量" class="tocs-link">常量</a></li>
                <li><a href="#字符串" class="tocs-link">字符串</a></li>
                <li><a href="#rune" class="tocs-link">rune</a></li>
                <li><a href="#指针" class="tocs-link">指针</a></li>
                <li><a href="#数组" class="tocs-link">数组</a></li>
                <li><a href="#slice" class="tocs-link">Slice</a></li>
                <li><a href="#byte" class="tocs-link">Byte</a></li>
                <li><a href="#map" class="tocs-link">Map</a></li>
                <li><a href="#struct" class="tocs-link">Struct</a></li>
                <li><a href="#json" class="tocs-link">JSON</a></li>
              </ol>
            </li>
            <li><a href="#泛型" class="tocs-link">泛型</a></li>
            <li><a href="#错误处理" class="tocs-link">错误处理</a></li>
            <li><a href="#控制语句" class="tocs-link">控制语句</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#switch" class="tocs-link">switch</a></li>
                <li><a href="#for-range-引用" class="tocs-link">for range 引用</a></li>
              </ol>
            </li>
            <li><a href="#函数" class="tocs-link">函数</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#defer" class="tocs-link">Defer</a></li>
                <li><a href="#panic" class="tocs-link">Panic</a></li>
                <li><a href="#可变参数函数" class="tocs-link">可变参数函数</a></li>
                <li><a href="#闭包" class="tocs-link">闭包</a></li>
              </ol>
            </li>
            <li><a href="#方法" class="tocs-link">方法</a></li>
            <li><a href="#interface与类型断言" class="tocs-link">interface与类型断言</a></li>
            <li><a href="#接口" class="tocs-link">接口</a></li>
            <li><a href="#反射" class="tocs-link">反射</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#是什么" class="tocs-link">是什么</a></li>
                <li><a href="#interface和反射" class="tocs-link">interface和反射</a></li>
              </ol>
            </li>
            <li><a href="#编写测试" class="tocs-link">编写测试</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#基准测试" class="tocs-link">基准测试</a></li>
                <li><a href="#表格驱动测试" class="tocs-link">表格驱动测试</a></li>
              </ol>
            </li>
            <li><a href="#反射-1" class="tocs-link">反射</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.26.6"></script>
    <div class="footer warpper">Created by <a href="https://github.com/shixiaocaia" target="_blank">shixiaocaia</a> | Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a><br>Think less and do more.</div>
    <script src="../js/tocbot.js?v=1.26.6"></script>
  </body>
</html>
