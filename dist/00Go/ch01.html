<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hello world iDoc</title>
    <meta name="description" content="在Go语言当中，字符的概念被称为 rune - 它是一个表示 Unicode 编码的整数。">
    <meta name="keywords" content="notebook">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/fancybox.css?v=1.25.0">
    <link rel="icon" href="../logo.png" type="image/x-icon">
    <script src="../js/copy.js?v=1.25.0"></script>
    <script src="../js/dark-mode.js?v=1.25.0"></script>
    <script src="../js/markdown-style.js?v=1.25.0"></script>
    <script src="../js/jquery.min.js?v=1.25.0"></script>
    <script src="../js/fancybox.umd.js?v=1.25.0"></script>
  </head>
  <body><button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script>
// Get the button:
let mybutton = document.getElementById("myBtn");
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};
// 顶部隐藏，底部隐藏
function scrollFunction() {
if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
mybutton.style.display = "block";
} else {
mybutton.style.display = "none";
}
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
document.body.scrollTop = 0; // For Safari
document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
</script>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="iDoc logo" src="../logo.png">
<span class="title">iDoc</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="index.html" target="" class="active">Go</a></li>
            <li><a href="../01MySQL/index.html" target="" class="">MySQL</a></li>
            <li><a href="../01Redis/index.html" target="" class="">Redis</a></li>
            <li><a href="../01LeetCode/index.html" target="" class="">LeetCode</a></li>
            <li><a href="../02HelloWorld/index.html" target="" class="">Hello World</a></li>
          </ul><a href="https://github.com/shixiaocaia" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper sidebar">
      <div class="sidebar-border">
        <aside class="sidebar" role="navigation">
          <div>
            <a href="index.html" class="">↩️README</a>
            <label>Hello World</label>
            <a href="ch00.html" class="">配个环境</a>
            <a href="ch04.html" class="">Go Moudle</a>
            <a href="ch01.html" class="">基础语法</a>
            <a href="ch02.html" class="">并发编程</a>
            <label>Web编程</label>
            <a href="ch03.html" class="">gorm</a>
            <a href="ch05.html" class="">gin</a>
            <label>原理深入</label>
            <a href="ch06.html" class="">原理分析</a>
          </div>
        </aside>
      </div>
      <markdown-style>
        <h1 id="hello-world"><a aria-hidden="true" tabindex="-1" href="#hello-world" class="anchor"><span class="icon icon-link"></span></a>Hello world</h1>
        <h2 id="hello-world-1"><a aria-hidden="true" tabindex="-1" href="#hello-world-1" class="anchor"><span class="icon icon-link"></span></a>Hello world</h2>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">go</span> build main<span class="token punctuation">.</span><span class="token keyword">go</span> <span class="token comment">// 得到二进制文件</span>
</span><span class="code-line line-number" line="2"><span class="token punctuation">.</span><span class="token operator">/</span>main 		     <span class="token comment">// 执行文件</span>
</span></code><input type="hidden" value="go build main.go // 得到二进制文件
./main 		     // 执行文件
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="go语言规范"><a aria-hidden="true" tabindex="-1" href="#go语言规范" class="anchor"><span class="icon icon-link"></span></a>Go语言规范</h2>
        <ol>
          <li>函数的内部实现尽量私有（首字母小写），调用公有（首字母大写）</li>
          <li></li>
        </ol>
        <h2 id="数据结构"><a aria-hidden="true" tabindex="-1" href="#数据结构" class="anchor"><span class="icon icon-link"></span></a>数据结构</h2>
        <h3 id="变量定义"><a aria-hidden="true" tabindex="-1" href="#变量定义" class="anchor"><span class="icon icon-link"></span></a>变量定义</h3>
        <ul>
          <li>
            <p>类型声明</p>
            <ul>
              <li>
                <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> FreezingC <span class="token builtin">float64</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">type</span> Fahrenheit <span class="token builtin">float64</span>
</span></code><input type="hidden" value="type FreezingC float64
type Fahrenheit float64
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
              </li>
              <li>
                <p>FreezingC Fahrenheit虽然底层都相同，都是float64，但是仍然不是同一种类型，进行计算时需要显示类型转换</p>
              </li>
              <li>
                <p><strong>Go中不具有隐式类型转换</strong></p>
              </li>
            </ul>
          </li>
          <li>
            <p>全局变量如果要在包外访问，首字母需要大写，golang是<strong>以首字母大小</strong>写来区分对包外是否可见。</p>
          </li>
        </ul>
        <h3 id="常量"><a aria-hidden="true" tabindex="-1" href="#常量" class="anchor"><span class="icon icon-link"></span></a>常量</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">"hello"</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">const</span><span class="token punctuation">(</span>
</span><span class="code-line line-number" line="3">    e <span class="token operator">=</span> <span class="token number">1.2323</span>
</span><span class="code-line line-number" line="4">    p <span class="token operator">=</span> <span class="token number">2312</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">)</span>
</span></code><input type="hidden" value="const str = &#x22;hello&#x22;
const(
    e = 1.2323
    p = 2312
)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>常量不能用 <code>:=</code></li>
          <li>保证在编译阶段就计算出表达式的值，不需要等到运行阶段。</li>
          <li>常量并不从属于任何具体类型，所以常量在声明时不说类型。</li>
        </ul>
        <h3 id="字符串"><a aria-hidden="true" tabindex="-1" href="#字符串" class="anchor"><span class="icon icon-link"></span></a>字符串</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">s <span class="token operator">:=</span> <span class="token string">"hello world"</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">var</span> s <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">"hello world"</span>
</span><span class="code-line line-number" line="3">s2 <span class="token operator">:=</span> s<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token comment">// 创建[0,5)的子串</span>
</span></code><input type="hidden" value="s := &#x22;hello world&#x22;
var s string = &#x22;hello world&#x22;
s2 := s[0:5] // 创建[0,5)的子串
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>Go中区别<code>" "</code> 和 <code>' '</code> 前者表示string，后者表示byte类型。</li>
          <li>Go中string相当于<strong>只读byte类似数组</strong>，需要转换为<code>[]byte</code> 字节切片。
            <ul>
              <li>两个字符串通过+=语句修改，是将新字符串赋值给变量</li>
              <li>两个字符串可以安全共用一段底层内存</li>
              <li>当发生+=，实际上是指向了新的内存地址，原来的底层没有发生变更</li>
            </ul>
          </li>
          <li>string和byte不能直接运算拼接，需要使用显示类型转换。</li>
        </ul>
        <h3 id="rune"><a aria-hidden="true" tabindex="-1" href="#rune" class="anchor"><span class="icon icon-link"></span></a>rune</h3>
        <p>在Go语言当中，字符的概念被称为 <code>rune</code> - 它是一个表示 Unicode 编码的整数。</p>
        <h3 id="指针"><a aria-hidden="true" tabindex="-1" href="#指针" class="anchor"><span class="icon icon-link"></span></a>指针</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">5</span>
</span><span class="code-line line-number" line="2">p <span class="token operator">:=</span> <span class="token operator">&#x26;</span>a
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4"><span class="token keyword">var</span> a <span class="token operator">*</span><span class="token builtin">int</span>
</span></code><input type="hidden" value="var a int = 5
p := &#x26;a

var a *int
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>用<code>&#x26;</code>取地址，用<code>*</code>取地址中的值</li>
          <li>在打印时，用<code>&#x26;</code>特殊标记，这是一个指针变量。</li>
          <li>Go中 a++是一个语句，只能单独一行使用。</li>
        </ul>
        <h3 id="数组"><a aria-hidden="true" tabindex="-1" href="#数组" class="anchor"><span class="icon icon-link"></span></a>数组</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">modify</span><span class="token punctuation">(</span>array <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"another"</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token function">modify</span><span class="token punctuation">(</span>array<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">a <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="array := [3]string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}

array := [...]string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}

func modify(array [5]string){
    array[0] = &#x22;another&#x22;
}

modify(array)

a := [2][3]int{
    {1, 1, 1},
    {2, 2, 2}
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>初始化后长度不可变</li>
          <li>数组的长度len和空间cap，一定是相等的</li>
          <li>数组在Go中为值类型</li>
          <li>长度不同的数组，是不同的类型</li>
        </ul>
        <h3 id="slice"><a aria-hidden="true" tabindex="-1" href="#slice" class="anchor"><span class="icon icon-link"></span></a>Slice</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"heli,"</span>hello<span class="token string">","</span>world"<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">newSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span>）
</span><span class="code-line line-number" line="5"><span class="token comment">// len = cap = 2</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">newSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token comment">// len = 2, cap = 100</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">multSlice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="11">
</span><span class="code-line line-number" line="12">multSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>multSlice<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13">multSlice <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>multSlice<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="14">multSlice<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">100</span>
</span></code><input type="hidden" value="slice := []string{&#x22;heli,&#x22;hello&#x22;,&#x22;world&#x22;}


newSlice := make([]int, 2）
// len = cap = 2

newSlice := make([]int, 2, 100)
// len = 2, cap = 100

multSlice := make([][]int, 0)

multSlice = append(multSlice, []int{1,2,3})
multSlice = append(multSlice, []int{2,2,3})
multSlice[0][1] = 100
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>Slice是一个结构体，指向底层的数组</li>
          <li>区别一般数组，是否指定数组的大小。是一种动态数组，长度可变
            <ul>
              <li>cap：申请的空间</li>
              <li>len：实际使用的空间</li>
              <li>扩容：cap == len时，对cap进行翻倍扩容，<strong>重新分配内存地址，但是减小大小，不会改变地址</strong></li>
            </ul>
          </li>
          <li>make函数只能用来创建<code>slice、map、channel</code>三种数据结构</li>
          <li>传参拷贝引用，区别前面的值拷贝</li>
          <li><code>slice[low:high]</code>还是共享了底层的数组，指针位置指向low，子切片</li>
          <li>二维slice的初始化，访问</li>
        </ul>
        <h3 id="byte"><a aria-hidden="true" tabindex="-1" href="#byte" class="anchor"><span class="icon icon-link"></span></a>Byte</h3>
        <ul>
          <li>uint8的别名</li>
        </ul>
        <h3 id="map"><a aria-hidden="true" tabindex="-1" href="#map" class="anchor"><span class="icon icon-link"></span></a>Map</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 创建一个变量</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">m <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span>sting<span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">    <span class="token string">"ming"</span><span class="token punctuation">:</span><span class="token number">10</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="6">    <span class="token string">"zhangsan"</span><span class="token punctuation">:</span><span class="token number">13</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9"><span class="token comment">// 二维</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">var</span> m <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="11">m <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12"><span class="token comment">// 分布初始化</span>
</span><span class="code-line line-number" line="13">m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="14">m<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"OK"</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">a，ok <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="17"><span class="token keyword">if</span> <span class="token operator">!</span>ok<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="18">    m<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="19"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">score<span class="token punctuation">,</span> err <span class="token operator">:=</span> m<span class="token punctuation">[</span><span class="token string">"ming"</span><span class="token punctuation">]</span>
</span><span class="code-line line-number" line="23"><span class="token comment">//访问时返回值和是否存在（true or false)</span>
</span><span class="code-line line-number" line="24">
</span><span class="code-line line-number" line="25"><span class="token comment">//注意这边的value知识一个拷贝，不对实际产生影响</span>
</span><span class="code-line line-number" line="26"><span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> m<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="27">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"%s\t %d\t"</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="28"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="29">
</span><span class="code-line line-number" line="30"><span class="token comment">// 删除</span>
</span><span class="code-line line-number" line="31"><span class="token function">delete</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span> <span class="token string">"ming"</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="// 创建一个变量
var m map[int]string = make(map[int]string)

m := map[sting]int{
    &#x22;ming&#x22;:10,
    &#x22;zhangsan&#x22;:13,
}

// 二维
var m map[int]map[int]string
m = make(map[int]map[int]string)
// 分布初始化
m[1] = make(map[int]string)
m[1][1] = &#x22;OK&#x22;

a，ok := m[2][1]
if !ok{
    m[2] = make(map[int]string)
}


score, err := m[&#x22;ming&#x22;]
//访问时返回值和是否存在（true or false)

//注意这边的value知识一个拷贝，不对实际产生影响
for key, value := range m{
    fmt.Println(&#x22;%s\t %d\t&#x22;, key, value)
}

// 删除
delete(m, &#x22;ming&#x22;)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>存储一系列无序的键值对，基于键来存储值</li>
          <li>传参时，还是指针，与切片相等，会改变底层的内容</li>
          <li>无序访问</li>
        </ul>
        <h3 id="struct"><a aria-hidden="true" tabindex="-1" href="#struct" class="anchor"><span class="icon icon-link"></span></a>Struct</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> person <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3">    Age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token comment">//a := person{}</span>
</span><span class="code-line line-number" line="8">    <span class="token comment">//a.Name = "joe"</span>
</span><span class="code-line line-number" line="9">    <span class="token comment">//a.Age = 19</span>
</span><span class="code-line line-number" line="10">    a <span class="token operator">:=</span> <span class="token operator">&#x26;</span>person<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">        Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="12">        Age<span class="token punctuation">:</span> <span class="token number">19</span>
</span><span class="code-line line-number" line="13">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">    a<span class="token punctuation">.</span>Age <span class="token operator">=</span> <span class="token number">20</span>
</span><span class="code-line line-number" line="15"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17"><span class="token comment">// 匿名结构</span>
</span><span class="code-line line-number" line="18"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">    a <span class="token operator">:=</span> <span class="token operator">&#x26;</span> <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="20">        Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="21">        Age
</span><span class="code-line line-number" line="22">    <span class="token punctuation">}</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">        Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span>
</span><span class="code-line line-number" line="24">        Age<span class="token punctuation">:</span> <span class="token number">19</span>
</span><span class="code-line line-number" line="25">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26">    
</span><span class="code-line line-number" line="27"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type person struct{
    Name string
    Age int
}

func main() {
    //a := person{}
    //a.Name = &#x22;joe&#x22;
    //a.Age = 19
    a := &#x26;person{
        Name: &#x22;joe&#x22;,
        Age: 19
    }
    a.Age = 20
}

// 匿名结构
func main(){
    a := &#x26; struct{
        Name string
        Age
    }{
        Name: &#x22;joe&#x22;,
        Age: 19
    }
    
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>普通传递是值传递，所以开始就加&#x26;，取地址，方便后续使用，避免每一次使用取地址</p>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> human <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    Sex <span class="token builtin">int</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">type</span> teacher <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    human
</span><span class="code-line line-number" line="7">    Name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="8">    Age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">a <span class="token operator">:=</span> teacher<span class="token punctuation">{</span>Name<span class="token punctuation">:</span> <span class="token string">"joe"</span><span class="token punctuation">,</span> Age<span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> human<span class="token punctuation">:</span> human<span class="token punctuation">{</span>Sex<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12">a<span class="token punctuation">.</span>Sex <span class="token operator">=</span> <span class="token number">1</span>
</span></code><input type="hidden" value="type human struct{
    Sex int
}

type teacher struct{
    human
    Name string
    Age int
}

a := teacher{Name: &#x22;joe&#x22;, Age: 19, human: human{Sex:0}}
a.Sex = 1
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>支持嵌套</p>
        </blockquote>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">sm1 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="3">    m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">sm2 <span class="token operator">:=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    age <span class="token builtin">int</span>
</span><span class="code-line line-number" line="8">    m   <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span><span class="token punctuation">{</span>age<span class="token punctuation">:</span> <span class="token number">11</span><span class="token punctuation">,</span> m<span class="token punctuation">:</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">"a"</span><span class="token punctuation">:</span> <span class="token string">"1"</span><span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token keyword">if</span> sm1 <span class="token operator">==</span> sm2 <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"sm1 == sm2"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="sm1 := struct {
    age int
    m   map[string]string
}{age: 11, m: map[string]string{&#x22;a&#x22;: &#x22;1&#x22;}}

sm2 := struct {
    age int
    m   map[string]string
}{age: 11, m: map[string]string{&#x22;a&#x22;: &#x22;1&#x22;}}

if sm1 == sm2 {
    fmt.Println(&#x22;sm1 == sm2&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>只有相同类型的结构体才可以比较，结构体是否相同不但与属性类型个数有关，还与属性顺序相关.</li>
            <li>此外构体属性中有不可以比较的类型，如<code>map</code>,<code>slice</code>，则结构体不能用<code>==</code>比较。应该使用<code>reflect.DeepEqual(s1,s2)</code></li>
          </ul>
        </blockquote>
        <h3 id="json"><a aria-hidden="true" tabindex="-1" href="#json" class="anchor"><span class="icon icon-link"></span></a>JSON</h3>
        <h2 id="泛型"><a aria-hidden="true" tabindex="-1" href="#泛型" class="anchor"><span class="icon icon-link"></span></a>泛型</h2>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token comment">// K, V是类型参数</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> MapKeys<span class="token punctuation">[</span>K comparable<span class="token punctuation">,</span> V any<span class="token punctuation">]</span><span class="token punctuation">(</span>m <span class="token keyword">map</span><span class="token punctuation">[</span>K<span class="token punctuation">]</span>V<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>K <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">	r <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span>K<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8">	<span class="token keyword">for</span> k <span class="token operator">:=</span> <span class="token keyword">range</span> m <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">		r <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token comment">// 复制key值</span>
</span><span class="code-line line-number" line="10">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11">	<span class="token keyword">return</span> r
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">type</span> List<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">	head<span class="token punctuation">,</span> tail <span class="token operator">*</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">type</span> element<span class="token punctuation">[</span>T any<span class="token punctuation">]</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">	next <span class="token operator">*</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span>
</span><span class="code-line line-number" line="20">	val  T
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token comment">// 使用时必须保留类型参数</span>
</span><span class="code-line line-number" line="24"><span class="token keyword">func</span> <span class="token punctuation">(</span>lst <span class="token operator">*</span>List<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">Push</span><span class="token punctuation">(</span>v T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="25">	<span class="token keyword">if</span> lst<span class="token punctuation">.</span>tail <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="26">		lst<span class="token punctuation">.</span>head <span class="token operator">=</span> <span class="token operator">&#x26;</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> v<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="27">		lst<span class="token punctuation">.</span>tail <span class="token operator">=</span> lst<span class="token punctuation">.</span>head
</span><span class="code-line line-number" line="28">	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">		lst<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token operator">&#x26;</span>element<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">{</span>val<span class="token punctuation">:</span> v<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="30">		lst<span class="token punctuation">.</span>tail <span class="token operator">=</span> lst<span class="token punctuation">.</span>tail<span class="token punctuation">.</span>next
</span><span class="code-line line-number" line="31">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="32"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number" line="34"><span class="token keyword">func</span> <span class="token punctuation">(</span>lst <span class="token operator">*</span>List<span class="token punctuation">[</span>T<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>T <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="35">	<span class="token keyword">var</span> elems <span class="token punctuation">[</span><span class="token punctuation">]</span>T
</span><span class="code-line line-number" line="36">	<span class="token keyword">for</span> e <span class="token operator">:=</span> lst<span class="token punctuation">.</span>head<span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">;</span> e <span class="token operator">=</span> e<span class="token punctuation">.</span>next <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="37">		elems <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>elems<span class="token punctuation">,</span> e<span class="token punctuation">.</span>val<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="38">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="39">	<span class="token keyword">return</span> elems
</span><span class="code-line line-number" line="40"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="41">
</span><span class="code-line line-number" line="42"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="43">	<span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">"2"</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">"4"</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">:</span> <span class="token string">"8"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="44">
</span><span class="code-line line-number" line="45">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"keys m:"</span><span class="token punctuation">,</span> <span class="token function">MapKeys</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="46">
</span><span class="code-line line-number" line="47">	<span class="token comment">// 可以不用指定类型参数</span>
</span><span class="code-line line-number" line="48">	<span class="token boolean">_</span> <span class="token operator">=</span> MapKeys<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="49">
</span><span class="code-line line-number" line="50">	lst <span class="token operator">:=</span> List<span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="51">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="52">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">13</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="53">	lst<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="54">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"list:"</span><span class="token punctuation">,</span> lst<span class="token punctuation">.</span><span class="token function">GetAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="55"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="56">
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

// K, V是类型参数
func MapKeys[K comparable, V any](m map[K]V) []K {
	r := make([]K, 0, len(m))
	for k := range m {
		r = append(r, k) // 复制key值
	}
	return r
}

type List[T any] struct {
	head, tail *element[T]
}

type element[T any] struct {
	next *element[T]
	val  T
}

// 使用时必须保留类型参数
func (lst *List[T]) Push(v T) {
	if lst.tail == nil {
		lst.head = &#x26;element[T]{val: v}
		lst.tail = lst.head
	} else {
		lst.tail.next = &#x26;element[T]{val: v}
		lst.tail = lst.tail.next
	}
}

func (lst *List[T]) GetAll() []T {
	var elems []T
	for e := lst.head; e != nil; e = e.next {
		elems = append(elems, e.val)
	}
	return elems
}

func main() {
	var m = map[int]string{1: &#x22;2&#x22;, 2: &#x22;4&#x22;, 4: &#x22;8&#x22;}

	fmt.Println(&#x22;keys m:&#x22;, MapKeys(m))

	// 可以不用指定类型参数
	_ = MapKeys[int, string](m)

	lst := List[int]{}
	lst.Push(10)
	lst.Push(13)
	lst.Push(23)
	fmt.Println(&#x22;list:&#x22;, lst.GetAll())
}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="错误处理"><a aria-hidden="true" tabindex="-1" href="#错误处理" class="anchor"><span class="icon icon-link"></span></a>错误处理</h2>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token punctuation">(</span>
</span><span class="code-line line-number" line="4">	<span class="token string">"errors"</span>
</span><span class="code-line line-number" line="5">	<span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8"><span class="token keyword">func</span> <span class="token function">f1</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">	<span class="token keyword">if</span> arg <span class="token operator">==</span> <span class="token number">42</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11">		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">"can't work with 42"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">	<span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">type</span> argError <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">	arg  <span class="token builtin">int</span>
</span><span class="code-line line-number" line="20">	prob <span class="token builtin">string</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>argError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">	<span class="token keyword">return</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">"%d - %s"</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>arg<span class="token punctuation">,</span> e<span class="token punctuation">.</span>prob<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="26">
</span><span class="code-line line-number" line="27"><span class="token keyword">func</span> <span class="token function">f2</span><span class="token punctuation">(</span>arg <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="28">	<span class="token keyword">if</span> arg <span class="token operator">==</span> <span class="token number">42</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">
</span><span class="code-line line-number" line="30">		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">&#x26;</span>argError<span class="token punctuation">{</span>arg<span class="token punctuation">,</span> <span class="token string">"can't work with it"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="31">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="32">	<span class="token keyword">return</span> arg <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token boolean">nil</span>
</span><span class="code-line line-number" line="33"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="34">
</span><span class="code-line line-number" line="35"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="36">
</span><span class="code-line line-number" line="37">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="38">		<span class="token keyword">if</span> r<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f1</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="39">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 failed:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="40">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="41">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f1 worked:"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="42">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="43">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="44">	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> i <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">42</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="45">		<span class="token keyword">if</span> r<span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f2</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> e <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="46">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 failed:"</span><span class="token punctuation">,</span> e<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="47">		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="48">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"f2 worked:"</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="49">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="50">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="51">
</span><span class="code-line line-number" line="52">	<span class="token boolean">_</span><span class="token punctuation">,</span> e <span class="token operator">:=</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="53">	<span class="token keyword">if</span> ae<span class="token punctuation">,</span> ok <span class="token operator">:=</span> e<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token operator">*</span>argError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="54">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ae<span class="token punctuation">.</span>arg<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="55">		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ae<span class="token punctuation">.</span>prob<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="56">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="57"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="58">
</span></code><input type="hidden" value="package main

import (
	&#x22;errors&#x22;
	&#x22;fmt&#x22;
)

func f1(arg int) (int, error) {
	if arg == 42 {

		return -1, errors.New(&#x22;can&#x27;t work with 42&#x22;)

	}

	return arg + 3, nil
}

type argError struct {
	arg  int
	prob string
}

func (e *argError) Error() string {
	return fmt.Sprintf(&#x22;%d - %s&#x22;, e.arg, e.prob)
}

func f2(arg int) (int, error) {
	if arg == 42 {

		return -1, &#x26;argError{arg, &#x22;can&#x27;t work with it&#x22;}
	}
	return arg + 3, nil
}

func main() {

	for _, i := range []int{7, 42} {
		if r, e := f1(i); e != nil {
			fmt.Println(&#x22;f1 failed:&#x22;, e)
		} else {
			fmt.Println(&#x22;f1 worked:&#x22;, r)
		}
	}
	for _, i := range []int{7, 42} {
		if r, e := f2(i); e != nil {
			fmt.Println(&#x22;f2 failed:&#x22;, e)
		} else {
			fmt.Println(&#x22;f2 worked:&#x22;, r)
		}
	}

	_, e := f2(42)
	if ae, ok := e.(*argError); ok {
		fmt.Println(ae.arg)
		fmt.Println(ae.prob)
	}
}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>按照惯例，错误通常是最后一个返回值并且是 <code>error</code> 类型，它是一个内建的接口。</li>
          <li>返回错误值为 nil 代表没有错误。</li>
          <li>你还可以通过实现 <code>Error()</code> 方法来自定义 <code>error</code> 类型。 这里使用自定义错误类型来表示上面例子中的参数错误。</li>
          <li>在程序中使用自定义错误类型的数据， 你需要通过类型断言来得到这个自定义错误类型的实例。</li>
        </ul>
        <h2 id="控制语句"><a aria-hidden="true" tabindex="-1" href="#控制语句" class="anchor"><span class="icon icon-link"></span></a>控制语句</h2>
        <h3 id="switch"><a aria-hidden="true" tabindex="-1" href="#switch" class="anchor"><span class="icon icon-link"></span></a>switch</h3>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    a <span class="token operator">:=</span> <span class="token number">1</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">switch</span> a <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">case</span> a <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="5">         fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"a"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">         <span class="token keyword">fallthrough</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="8">    
</span><span class="code-line line-number" line="9">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    a := 1
    switch a {
    case a >= 0:
         fmt.Println(&#x22;a&#x22;)
         fallthrough
    case 1:
    
    }

}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>如果switch不加语句块，希望判断每一个case条件，使用fallthrough</li>
          <li>默认下一个case满足，会跳出这个switch</li>
          <li>当有很多个if语句检查特定的值，通常用switch语句来代替</li>
        </ul>
        <h2 id="函数"><a aria-hidden="true" tabindex="-1" href="#函数" class="anchor"><span class="icon icon-link"></span></a>函数</h2>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token comment">// 不定长变参，这是拷贝值</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span>b <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token comment">// 拷贝地址</span>
</span><span class="code-line line-number" line="8"><span class="token keyword">func</span> <span class="token function">A</span><span class="token punctuation">(</span>b <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="// 不定长变参，这是拷贝值
func A(b string, a ...int){
    

}

// 拷贝地址
func A(b string, a []int){


}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>Go函数不支持嵌套、重载和默认参数</li>
            <li>无需声明原型、不定长度变参、多返回值、命名返回值参数</li>
          </ul>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    a <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">        fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"A"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">    <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    a := func(){
        fmt.Println(&#x22;A&#x22;)
    }
    a()
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>A 是一个<strong>函数类型变量</strong>，当作函数一样调用</p>
        </blockquote>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    f <span class="token operator">:=</span> <span class="token function">closure</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">f</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">closure</span><span class="token punctuation">(</span>x <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>y <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">        <span class="token keyword">return</span> x <span class="token operator">+</span> y
</span><span class="code-line line-number" line="8">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func main(){
    f := closure(10)
    fmt.Println(f(1))
}
func closure(x int) func(int) int{
    return func(y int) int {
        return x + y
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <p>返回值是一个函数，x是声明时给的值，y是后传入的值</p>
        </blockquote>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token comment">/*
</span></span><span class="code-line line-number" line="4"><span class="token comment">    下面代码是否编译通过?
</span></span><span class="code-line line-number" line="5"><span class="token comment">*/</span>
</span><span class="code-line line-number" line="6"><span class="token keyword">func</span> <span class="token function">myFunc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>sum <span class="token builtin">int</span><span class="token punctuation">,</span><span class="token builtin">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> x<span class="token operator">+</span>y<span class="token punctuation">,</span><span class="token boolean">nil</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">    num<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">myFunc</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"num = "</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

/*
    下面代码是否编译通过?
*/
func myFunc(x,y int)(sum int,error){
    return x+y,nil
}

func main() {
    num, err := myFunc(1, 2)
    fmt.Println(&#x22;num = &#x22;, num)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <blockquote>
          <ul>
            <li>在函数有多个返回值时，只要有一个返回值有指定命名，其他的也必须命名</li>
            <li>如果返回值有有多个返回值必须加上括号</li>
            <li>如果只有一个返回值并且有命名也需要加上括号</li>
          </ul>
        </blockquote>
        <h3 id="defer"><a aria-hidden="true" tabindex="-1" href="#defer" class="anchor"><span class="icon icon-link"></span></a>Defer</h3>
        <p><code>defer</code>语句会将函数推迟到外层函数返回之后执行。</p>
        <p>推迟调用的函数其<strong>参数会立即求值</strong>，但直到外层函数返回前该函数都不会被调用。</p>
        <ul>
          <li>defer参数在语句出现前已经确定（除了用的地址，否则无法改变）
            <ul>
              <li>实际的步骤是：设置的值->执行defer->将结果返回
                <ul>
                  <li>如果改变的不是返回值变量，defer语句内不造成影响</li>
                  <li>如果返回值是匿名的，也不受到影响</li>
                </ul>
              </li>
            </ul>
          </li>
          <li>使用场景：文件的关闭，或数据库连接的释放等，这样打开和关闭的代码写在一起，既可以使得代码更加的整洁，也可以防止出现开发者在写了长长的业务代码后，忘记关闭的情况。</li>
          <li>有多个defer时，按照语句顺序，<strong>压栈出栈顺序</strong>进行</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token keyword">var</span> fs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">    <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&#x3C;</span> <span class="token number">4</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">       <span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"defer i = "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="10">       <span class="token comment">// 延迟匿名函数，必须加括号</span>
</span><span class="code-line line-number" line="11">       <span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="12">          fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"defer_closure i = "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="13">       <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">       fs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"closure i = "</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18">    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> f <span class="token operator">:=</span> <span class="token keyword">range</span> fs <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">       <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func main() {
    var fs = [4]func(){}

    for i := 0; i < 4; i++ {
       defer fmt.Println(&#x22;defer i = &#x22;, i)
       // 延迟匿名函数，必须加括号
       defer func() {
          fmt.Println(&#x22;defer_closure i = &#x22;, i)
       }()

       fs[i] = func() { fmt.Println(&#x22;closure i = &#x22;, i) }
    }

    for _, f := range fs {
       f()
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="panic"><a aria-hidden="true" tabindex="-1" href="#panic" class="anchor"><span class="icon icon-link"></span></a>Panic</h3>
        <ul>
          <li>单独panic发生后，后续不会执行，配合defer中包含recover函数进行恢复
            <ul>
              <li>因为defer无论如何都会执行，所以发生panic后，把recover放到defer中</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">Demo</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">	<span class="token comment">//定义10个元素的数组</span>
</span><span class="code-line line-number" line="7">	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</span><span class="code-line line-number" line="8">	<span class="token comment">//错误拦截要在产生错误前设置</span>
</span><span class="code-line line-number" line="9">	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="10">		<span class="token comment">//设置recover拦截错误信息</span>
</span><span class="code-line line-number" line="11">		err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">		<span class="token comment">//产生panic异常  打印错误信息</span>
</span><span class="code-line line-number" line="13">		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="15">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="17">	<span class="token comment">//根据函数参数为数组元素赋值</span>
</span><span class="code-line line-number" line="18">	<span class="token comment">//如果i的值超过数组下标 会报错误：数组下标越界</span>
</span><span class="code-line line-number" line="19">	arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">10</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="22">
</span><span class="code-line line-number" line="23"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="24">	<span class="token function">Demo</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25">	<span class="token comment">//产生错误后 程序继续</span>
</span><span class="code-line line-number" line="26">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"程序继续执行..."</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="27"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func Demo(i int) {
	//定义10个元素的数组
	var arr [10]int
	//错误拦截要在产生错误前设置
	defer func() {
		//设置recover拦截错误信息
		err := recover()
		//产生panic异常  打印错误信息
		if err != nil {
			fmt.Println(err)
		}
	}()
	//根据函数参数为数组元素赋值
	//如果i的值超过数组下标 会报错误：数组下标越界
	arr[i] = 10

}

func main() {
	Demo(10)
	//产生错误后 程序继续
	fmt.Println(&#x22;程序继续执行...&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="可变参数函数"><a aria-hidden="true" tabindex="-1" href="#可变参数函数" class="anchor"><span class="icon icon-link"></span></a>可变参数函数</h3>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">sum</span><span class="token punctuation">(</span>nums <span class="token operator">...</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> <span class="token string">" "</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">    total <span class="token operator">:=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="8">    <span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> num <span class="token operator">:=</span> <span class="token keyword">range</span> nums <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">        total <span class="token operator">+=</span> num
</span><span class="code-line line-number" line="10">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">
</span><span class="code-line line-number" line="16">    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="17">    <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">
</span><span class="code-line line-number" line="19">    nums <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="20">    <span class="token function">sum</span><span class="token punctuation">(</span>nums<span class="token operator">...</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="21"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func sum(nums ...int) {
    fmt.Print(nums, &#x22; &#x22;)
    total := 0
    for _, num := range nums {
        total += num
    }
    fmt.Println(total)
}

func main() {

    sum(1, 2)
    sum(1, 2, 3)

    nums := []int{1, 2, 3, 4}
    sum(nums...)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="闭包"><a aria-hidden="true" tabindex="-1" href="#闭包" class="anchor"><span class="icon icon-link"></span></a>闭包</h3>
        <p>匿名函数在你想定义一个不需要命名的内联函数时是很实用的。</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    i <span class="token operator">:=</span> <span class="token number">0</span>
</span><span class="code-line line-number" line="7">    <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">        i<span class="token operator">++</span>
</span><span class="code-line line-number" line="9">        <span class="token keyword">return</span> i
</span><span class="code-line line-number" line="10">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="11"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="12">
</span><span class="code-line line-number" line="13"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">    nextInt <span class="token operator">:=</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="16">
</span><span class="code-line line-number" line="17">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="19">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">nextInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">
</span><span class="code-line line-number" line="21">    newInts <span class="token operator">:=</span> <span class="token function">intSeq</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="22">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">newInts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="23"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

func intSeq() func() int {
    i := 0
    return func() int {
        i++
        return i
    }
}

func main() {

    nextInt := intSeq()

    fmt.Println(nextInt())
    fmt.Println(nextInt())
    fmt.Println(nextInt())

    newInts := intSeq()
    fmt.Println(newInts())
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>nextInt拥有属于自己的i，每次调用返回同一个i。</li>
        </ul>
        <h2 id="方法"><a aria-hidden="true" tabindex="-1" href="#方法" class="anchor"><span class="icon icon-link"></span></a>方法</h2>
        <p>是某种特定类型的函数。</p>
        <ul>
          <li>同名方法，不能根据形参的类型进行重载</li>
          <li>对于type定义，也可以使用附加特定的方法</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a TZ
</span><span class="code-line line-number" line="2"><span class="token comment">//method value</span>
</span><span class="code-line line-number" line="3">a<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4"><span class="token comment">//method expression</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">(</span><span class="token operator">*</span>TZ<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token operator">&#x26;</span>a<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token keyword">func</span> <span class="token punctuation">(</span>a <span class="token operator">*</span>TZ<span class="token punctuation">)</span> <span class="token function">Print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="8">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Tz"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="9"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="var a TZ
//method value
a.Print()
//method expression
(*TZ).Print(&#x26;a)

func (a *TZ) Print(){
    fmt.Println(&#x22;Tz&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="interface与类型断言"><a aria-hidden="true" tabindex="-1" href="#interface与类型断言" class="anchor"><span class="icon icon-link"></span></a>interface与类型断言</h2>
        <p>一个数据通过func funcName(interface{})的方式传进来的时候，也就意味着这个参数被自动的转为interface{}的类型。</p>
        <p>在我们使用时，应该进行断言</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">var</span> a <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Where are you,Jonny?"</span><span class="token punctuation">,</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="var a interface{}

fmt.Println(&#x22;Where are you,Jonny?&#x22;, a.(string))
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>但是直接断言，错误会发生panic，所以一般在断言前进行一定的判断</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="value, ok := a.(string)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1">value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="2"><span class="token keyword">if</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"It's not ok for type string"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">    <span class="token keyword">return</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"The value is "</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>
</span></code><input type="hidden" value="value, ok := a.(string)
if !ok {
    fmt.Println(&#x22;It&#x27;s not ok for type string&#x22;)
    return
}
fmt.Println(&#x22;The value is &#x22;, value)
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>类型断言用于判断一个<strong>接口对象是否实现了特定的接口</strong>，并且获取其对应的实际值。在这段代码中，<code>r.(io.Writer)</code>是一种类型断言，用于判断<code>r</code>是否实现了<code>io.Writer</code>接口，并将其转换为<code>io.Writer</code>类型的实例赋值给变量<code>w</code>。</p>
        <p>而类型强制转换是将一个数据从一种类型转换为另一种类型，这通常在非接口类型之间进行。例如，将一个整数类型转换为浮点数类型，或者将一个字符串类型转换为字节切片类型等。</p>
        <h2 id="接口"><a aria-hidden="true" tabindex="-1" href="#接口" class="anchor"><span class="icon icon-link"></span></a>接口</h2>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"fmt"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">type</span> USB <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</span><span class="code-line line-number" line="7">    <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10"><span class="token keyword">type</span> PhoneConnecter <span class="token keyword">struct</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">    name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="12"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">
</span><span class="code-line line-number" line="14"><span class="token keyword">func</span> <span class="token punctuation">(</span>pc PhoneConnecter<span class="token punctuation">)</span> <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="15">    <span class="token keyword">return</span> pc<span class="token punctuation">.</span>name
</span><span class="code-line line-number" line="16"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="17">
</span><span class="code-line line-number" line="18"><span class="token keyword">func</span> <span class="token punctuation">(</span>pc PhoneConnecter<span class="token punctuation">)</span> <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="19">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Connect:"</span><span class="token punctuation">,</span> pc<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">    a <span class="token operator">:=</span> PhoneConnecter<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"xiaocai"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="24">    a<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="25">    <span class="token function">Disconnect</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="26"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnext."</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="30"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="package main

import &#x22;fmt&#x22;

type USB interface {
    Name() string
    Connect()
}

type PhoneConnecter struct {
    name string
}

func (pc PhoneConnecter) Name() string {
    return pc.name
}

func (pc PhoneConnecter) Connect() {
    fmt.Println(&#x22;Connect:&#x22;, pc.name)
}

func main() {
    a := PhoneConnecter{name: &#x22;xiaocai&#x22;}
    a.Connect()
    Disconnect(a)
}

func Disconnect(usb USB) {
    fmt.Println(&#x22;Disconnext.&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>一般把接口类型名后面加上<code>er</code>，接口作为函数参数时，任何满足这个接口的变量类型都可以传入</li>
          <li>接口是一个或多个方法签名的集合
            <ul>
              <li>USB这个接口含有name、Connect两个方法</li>
              <li>只有方法声明，没有实现，没有数据字段</li>
            </ul>
          </li>
          <li>只要某个类型拥有该接口的所有方法签名，即算实现该接口，无需显示声明实现了哪个接口，这称为Structural Typing
            <ul>
              <li>PhoneConnecter实现了USB这个接口中的name，Connect方法，就算实现了该接口</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> USB <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3">    Connecter
</span><span class="code-line line-number" line="4"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6"><span class="token keyword">type</span> Connecter <span class="token keyword">interface</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="7">    <span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type USB interface {
    Name() string
    Connecter
}

type Connecter interface {
    Connect()
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>接口可以匿名嵌入其它接口，或嵌入到结构中</li>
          <li>也同时满足struct的嵌入，struct中嵌入一个满足接口类型的类型，那么整体新的struct也满足这个接口</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">if</span> pc<span class="token punctuation">,</span> ok <span class="token operator">:=</span> usb<span class="token punctuation">.</span><span class="token punctuation">(</span>PhoneConnecter<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnect:"</span><span class="token punctuation">,</span> pc<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">       <span class="token keyword">return</span>
</span><span class="code-line line-number" line="5">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="6">    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Unknown device"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func Disconnect(usb USB) {
    if pc, ok := usb.(PhoneConnecter); ok {
       fmt.Println(&#x22;Disconnect:&#x22;, pc.name)
       return
    }
    fmt.Println(&#x22;Unknown device&#x22;)
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>对接口类型的断言</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> empty <span class="token keyword">interface</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="type empty interface{

}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>空接口，任何类型都实现了</li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">Disconnect</span><span class="token punctuation">(</span>usb USB<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token keyword">switch</span> v <span class="token operator">:=</span> usb<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="3">    <span class="token keyword">case</span> PhoneConnecter<span class="token punctuation">:</span>
</span><span class="code-line line-number" line="4">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Disconnect:"</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="5">    <span class="token keyword">default</span><span class="token punctuation">:</span>
</span><span class="code-line line-number" line="6">       fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">"Unknown device"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">    <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func Disconnect(usb USB) {
    switch v := usb.(type) {
    case PhoneConnecter:
       fmt.Println(&#x22;Disconnect:&#x22;, v.name)
    default:
       fmt.Println(&#x22;Unknown device&#x22;)
    }
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>当接口的类型过多时，使用<code>type switch</code></li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">type</span> tvConnecter <span class="token keyword">struct</span><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    name <span class="token builtin">string</span>
</span><span class="code-line line-number" line="3"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token punctuation">(</span>tv  tvConnecter<span class="token punctuation">)</span>Connect<span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">    <span class="token operator">...</span>
</span><span class="code-line line-number" line="7"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="8">
</span><span class="code-line line-number" line="9">tv <span class="token operator">:=</span> tvConnecter<span class="token punctuation">{</span><span class="token string">"1234"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="10"><span class="token keyword">var</span> a USB
</span><span class="code-line line-number" line="11">a <span class="token operator">=</span> <span class="token function">USB</span><span class="token punctuation">(</span>tv<span class="token punctuation">)</span> <span class="token comment">//error</span>
</span></code><input type="hidden" value="type tvConnecter struct{
    name string
}

func (tv  tvConnecter)Connect{
    ...
}

tv := tvConnecter{&#x22;1234&#x22;}
var a USB
a = USB(tv) //error
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>超级接口PhoneConnecter可以转换为下级接口，反之Connecter不可以转换为PhoneConnecter
            <ul>
              <li>也就是只能实现<strong>降级转换</strong></li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"><span class="code-line line-number" line="1">a <span class="token operator">:=</span> PhoneConnecter<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">"xiaocai"</span><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">var</span> tmp PhoneConnecter
</span><span class="code-line line-number" line="4">tmp <span class="token operator">=</span> a
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">tmp<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="7">
</span><span class="code-line line-number" line="8">a<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">"pc"</span>
</span><span class="code-line line-number" line="9">
</span><span class="code-line line-number" line="10">tmp<span class="token punctuation">.</span><span class="token function">Connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></code><input type="hidden" value="a := PhoneConnecter{name: &#x22;xiaocai&#x22;}

var tmp PhoneConnecter
tmp = a

tmp.Connect()

a.name = &#x22;pc&#x22;

tmp.Connect()
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>将对象赋值给接口时，会发生拷贝，而接口内部存储的是指向这个复制品的指针，既无法修改复制品的状态，也无法获取指针
            <ul>
              <li>这里tmp收到的是浅拷贝</li>
              <li>a的改动，不会影响tmp</li>
            </ul>
          </li>
        </ul>
        <pre class="language-go"><code class="language-Go code-highlight"></code><input type="hidden" value=""><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>只有当接口存储的类型和对象都为il时，接口才等于nil</li>
          <li>接口调用不会做receiver的自动转换</li>
          <li>接口同样支持匿名字段方法</li>
          <li>接口也可实现类似OOP中的多态</li>
          <li>空接口可以作为任何类型数据的容器</li>
        </ul>
        <h2 id="反射"><a aria-hidden="true" tabindex="-1" href="#反射" class="anchor"><span class="icon icon-link"></span></a>反射</h2>
        <h3 id="是什么"><a aria-hidden="true" tabindex="-1" href="#是什么" class="anchor"><span class="icon icon-link"></span></a>是什么</h3>
        <p>在计算机科学领域，反射是指一类应用，它们能够<strong>自描述和自控制</strong>。也就是说，这类应用通过采用某种机制来实现对自己行为的描述（self-representation）和监测（examination），并能根据自身行为的状态和结果，调整或修改应用所描述行为的状态和相关的语义。</p>
        <p>Golang语言实现了反射，反射机制就是在运行时动态的调用对象的方法和属性，官方自带的reflect包就是反射相关的，只要包含这个包就可以使用。</p>
        <h3 id="interface和反射"><a aria-hidden="true" tabindex="-1" href="#interface和反射" class="anchor"><span class="icon icon-link"></span></a>interface和反射</h3>
        <h2 id="编写测试"><a aria-hidden="true" tabindex="-1" href="#编写测试" class="anchor"><span class="icon icon-link"></span></a>编写测试</h2>
        <p>编写测试和函数很类似，其中有一些规则</p>
        <ul>
          <li>程序需要在一个名为 <code>xxx_test.go</code> 的文件中编写</li>
          <li>测试函数的命名必须以单词 <code>Test</code> 开始</li>
          <li>测试函数只接受一个参数 <code>t *testing.T</code></li>
        </ul>
        <p>现在这些信息足以让我们明白，类型为 <code>*testing.T</code> 的变量 <code>t</code> 是你在测试框架中的 hook（钩子），所以当你想让测试失败时可以执行 <code>t.Fail()</code> 之类的操作。</p>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">package</span> main
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3"><span class="token keyword">import</span> <span class="token string">"testing"</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token keyword">func</span> <span class="token function">TestHello</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7">	<span class="token comment">// 将断言重构为匿名函数，减少重复，提高可读性</span>
</span><span class="code-line line-number" line="8">	assertCorrectMessage <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="9">		t<span class="token punctuation">.</span><span class="token function">Helper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 这是辅助函数,出错显示在调用地方，而不是辅助函数内部</span>
</span><span class="code-line line-number" line="10">		<span class="token keyword">if</span> got <span class="token operator">!=</span> want <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="11">			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">"got '%q' want '%q'"</span><span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="12">		<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="13">	<span class="token punctuation">}</span>
</span><span class="code-line line-number" line="14">
</span><span class="code-line line-number" line="15">	<span class="token comment">// 子测试</span>
</span><span class="code-line line-number" line="16">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"saying hello to people"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="17">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Chris"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="18">		want <span class="token operator">:=</span> <span class="token string">"Hello, Chris"</span>
</span><span class="code-line line-number" line="19">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="20">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="21">
</span><span class="code-line line-number" line="22">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"empty string defaults to 'world'"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="23">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="24">		want <span class="token operator">:=</span> <span class="token string">"Hello, World"</span>
</span><span class="code-line line-number" line="25">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="26">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="27">
</span><span class="code-line line-number" line="28">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"in Spanish"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="29">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Elodie"</span><span class="token punctuation">,</span> <span class="token string">"Spanish"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="30">		want <span class="token operator">:=</span> <span class="token string">"Hola, Elodie"</span>
</span><span class="code-line line-number" line="31">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="32">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="33">
</span><span class="code-line line-number" line="34">	t<span class="token punctuation">.</span><span class="token function">Run</span><span class="token punctuation">(</span><span class="token string">"in French"</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="35">		got <span class="token operator">:=</span> <span class="token function">Hello</span><span class="token punctuation">(</span><span class="token string">"Elodie"</span><span class="token punctuation">,</span> <span class="token string">"French"</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="36">		want <span class="token operator">:=</span> <span class="token string">"Bonjour, Elodie"</span>
</span><span class="code-line line-number" line="37">		<span class="token function">assertCorrectMessage</span><span class="token punctuation">(</span>t<span class="token punctuation">,</span> got<span class="token punctuation">,</span> want<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="38">	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="39">
</span><span class="code-line line-number" line="40"><span class="token punctuation">}</span>
</span><span class="code-line line-number" line="41">
</span></code><input type="hidden" value="package main

import &#x22;testing&#x22;

func TestHello(t *testing.T) {

	// 将断言重构为匿名函数，减少重复，提高可读性
	assertCorrectMessage := func(t *testing.T, got, want string) {
		t.Helper() // 这是辅助函数,出错显示在调用地方，而不是辅助函数内部
		if got != want {
			t.Errorf(&#x22;got &#x27;%q&#x27; want &#x27;%q&#x27;&#x22;, got, want)
		}
	}

	// 子测试
	t.Run(&#x22;saying hello to people&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Chris&#x22;, &#x22;&#x22;)
		want := &#x22;Hello, Chris&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;empty string defaults to &#x27;world&#x27;&#x22;, func(t *testing.T) {
		got := Hello(&#x22;&#x22;, &#x22;&#x22;)
		want := &#x22;Hello, World&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;in Spanish&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Elodie&#x22;, &#x22;Spanish&#x22;)
		want := &#x22;Hola, Elodie&#x22;
		assertCorrectMessage(t, got, want)
	})

	t.Run(&#x22;in French&#x22;, func(t *testing.T) {
		got := Hello(&#x22;Elodie&#x22;, &#x22;French&#x22;)
		want := &#x22;Bonjour, Elodie&#x22;
		assertCorrectMessage(t, got, want)
	})

}

"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>重构重复函数，提高代码可读性</li>
          <li>子测试，测试不同的案例</li>
        </ul>
        <pre class="language-go"><code class="language-go code-highlight"><span class="code-line line-number" line="1"><span class="token keyword">func</span> <span class="token function">ExampleAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">	sum <span class="token operator">:=</span> <span class="token function">Add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
</span><span class="code-line line-number" line="3">	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sum<span class="token punctuation">)</span>
</span><span class="code-line line-number" line="4">	<span class="token comment">// Output: 4</span>
</span><span class="code-line line-number" line="5"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="func ExampleAdd() {
	sum := Add(2, 2)
	fmt.Println(sum)
	// Output: 4
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <ul>
          <li>在同一个包文件中添加<code>_test.go</code>，编写示例代码，提高可读性</li>
          <li>示例代码会作为测试套件的一部分，示例会被编译</li>
          <li>如果删除注释 「//Output: 6」，示例函数将不会执行。虽然函数会被编译，但是它不会执行。</li>
        </ul>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#hello-world-1" class="tocs-link">Hello world</a></li>
            <li><a href="#go语言规范" class="tocs-link">Go语言规范</a></li>
            <li><a href="#数据结构" class="tocs-link">数据结构</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#变量定义" class="tocs-link">变量定义</a></li>
                <li><a href="#常量" class="tocs-link">常量</a></li>
                <li><a href="#字符串" class="tocs-link">字符串</a></li>
                <li><a href="#rune" class="tocs-link">rune</a></li>
                <li><a href="#指针" class="tocs-link">指针</a></li>
                <li><a href="#数组" class="tocs-link">数组</a></li>
                <li><a href="#slice" class="tocs-link">Slice</a></li>
                <li><a href="#byte" class="tocs-link">Byte</a></li>
                <li><a href="#map" class="tocs-link">Map</a></li>
                <li><a href="#struct" class="tocs-link">Struct</a></li>
                <li><a href="#json" class="tocs-link">JSON</a></li>
              </ol>
            </li>
            <li><a href="#泛型" class="tocs-link">泛型</a></li>
            <li><a href="#错误处理" class="tocs-link">错误处理</a></li>
            <li><a href="#控制语句" class="tocs-link">控制语句</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#switch" class="tocs-link">switch</a></li>
              </ol>
            </li>
            <li><a href="#函数" class="tocs-link">函数</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#defer" class="tocs-link">Defer</a></li>
                <li><a href="#panic" class="tocs-link">Panic</a></li>
                <li><a href="#可变参数函数" class="tocs-link">可变参数函数</a></li>
                <li><a href="#闭包" class="tocs-link">闭包</a></li>
              </ol>
            </li>
            <li><a href="#方法" class="tocs-link">方法</a></li>
            <li><a href="#interface与类型断言" class="tocs-link">interface与类型断言</a></li>
            <li><a href="#接口" class="tocs-link">接口</a></li>
            <li><a href="#反射" class="tocs-link">反射</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#是什么" class="tocs-link">是什么</a></li>
                <li><a href="#interface和反射" class="tocs-link">interface和反射</a></li>
              </ol>
            </li>
            <li><a href="#编写测试" class="tocs-link">编写测试</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.25.0"></script>
    <div class="footer warpper">Created by <a href="https://github.com/shixiaocaia" target="_blank">shixiaocaia</a> | Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a><br>Think less and do more.</div>
    <script src="../js/tocbot.js?v=1.25.0"></script>
  </body>
</html>
