<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do sth for fun iDoc</title>
    <meta name="description" content="请求报文和响应报文的结构如下。">
    <meta name="keywords" content="notebook">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.21.13">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.21.13">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.21.13">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.21.13">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.21.13">
    <link rel="stylesheet" type="text/css" href="../css/demo-preview.css?v=1.21.13">
    <link rel="icon" href="../logo.png" type="image/x-icon">
    <script src="../js/copy.js?v=1.21.13"></script>
    <script src="../js/dark-mode.js?v=1.21.13"></script>
    <script src="../js/markdown-style.js?v=1.21.13"></script>
  </head>
  <body id="idoctotop"><a href="#idoctotop" class="gototop">top</a>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="iDoc logo" src="../logo.png">
<span class="title">iDoc</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="../00CPP/index.html" target="" class="">Cpp</a></li>
            <li><a href="../01DataStructure/index.html" target="" class="">DataStructure</a></li>
            <li><a href="../01OperatingSystem/index.html" target="" class="">OperatingSystem</a></li>
            <li><a href="index.html" target="" class="active">ComputerNetwrok</a></li>
            <li><a href="../01DataBase/index.html" target="" class="">DataBase</a></li>
            <li><a href="../02MyWeb/index.html" target="" class="">Webserver</a></li>
            <li><a href="../00Other/index.html" target="" class="">Other</a></li>
          </ul><a href="https://github.com/shixiaocaia" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper sidebar">
      <div class="sidebar-border">
        <aside class="sidebar" role="navigation">
          <div>
            <a href="index.html" class="">↩️README</a>
            <label>深入浅出计算机网络</label>
            <a href="ch04.html" class="">网络层</a>
            <a href="ch05.html" class="">传输层</a>
            <a href="ch06.html" class="">应用层</a>
            <label>HTTP篇</label>
            <label>TCP篇</label>
            <label>IP篇</label>
            <label>综合篇</label>
          </div>
        </aside>
      </div>
      <markdown-style>
        <h2 id="报文的结构"><a aria-hidden="true" tabindex="-1" href="#报文的结构" class="anchor"><span class="icon icon-link"></span></a>报文的结构</h2>
        <p>请求报文和响应报文的结构如下。</p>
        <img src="http://pic.shixiaocaia.fun/202301301046212.png" alt="image-20221120090750316" style="zoom:50%;">
        <h2 id="编码提升传输速率"><a aria-hidden="true" tabindex="-1" href="#编码提升传输速率" class="anchor"><span class="icon icon-link"></span></a>编码提升传输速率</h2>
        <h3 id="报文主体和实体主体"><a aria-hidden="true" tabindex="-1" href="#报文主体和实体主体" class="anchor"><span class="icon icon-link"></span></a>报文主体和实体主体</h3>
        <ul>
          <li>报文（message）</li>
        </ul>
        <p>是 HTTP 通信中的基本单位，由 8 位组字节流组成，通过 HTTP 通信传输。</p>
        <ul>
          <li>实体（entity）</li>
        </ul>
        <p>作为请求或响应的有效载荷数据（补充项）被传输，其内容由实体首部和实体主体组成。</p>
        <blockquote>
          <p>HTTP 报文的主体用于传输请求或响应的实体主体。 通常，报文主体等于实体主体。</p>
          <p>只有当传输中进行编码操作时，实体主体的内容发生变化，才导致它和报文主体产生差异。</p>
        </blockquote>
        <h3 id="内容编码"><a aria-hidden="true" tabindex="-1" href="#内容编码" class="anchor"><span class="icon icon-link"></span></a>内容编码</h3>
        <p>HTTP协议中有类似zip压缩文件的功能，内容编码指明应用在实体内容上的编码格式，并保持实体信息原样压缩。内容编码后的实体由客户端接收并负责解码。</p>
        <p>常见的内容编码包括：gzip、compress、deflate。</p>
        <h3 id="分块传输编码"><a aria-hidden="true" tabindex="-1" href="#分块传输编码" class="anchor"><span class="icon icon-link"></span></a>分块传输编码</h3>
        <p>在传输大容量时，通过把文件分块传输，这样每一块传输完成时，浏览器能够逐步显示画面。</p>
        <p>使用分块传输编码的实体主体会由接收的客户端负责解码，恢复到编 码前的实体主体。</p>
        <h2 id="发送多种数据的多部份对象集合"><a aria-hidden="true" tabindex="-1" href="#发送多种数据的多部份对象集合" class="anchor"><span class="icon icon-link"></span></a>发送多种数据的多部份对象集合</h2>
        <p>发送邮件时，允许发送多份不同类型的文件。</p>
        <p>是因为采用了 MIME（Multipurpose Internet Mail Extensions，多用途因特网邮 件扩展）机制，它允许邮件处理文本、图片、视频等多个不同类型的文件。</p>
        <p>在 HTTP 报文中使用多部分对象集合时，需要在首部字段里加上 Content-type。</p>
        <p>使用 boundary 字符串来划分多部分对象集合指明的各类实体。</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">--THIS_STRING_SEPARATES //表开始
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">--THIS_STRING_SEPARATES-- //表结束
</span></code><input type="hidden" value="--THIS_STRING_SEPARATES //表开始

--THIS_STRING_SEPARATES-- //表结束
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="获取部分内容的范围请求"><a aria-hidden="true" tabindex="-1" href="#获取部分内容的范围请求" class="anchor"><span class="icon icon-link"></span></a>获取部分内容的范围请求</h2>
        <p>实现指定下载的实体范围的功能。像这样，指定范围发送的请 求叫做范围请求（Range Request）。</p>
        <h2 id="内容协商返回最合适的内容"><a aria-hidden="true" tabindex="-1" href="#内容协商返回最合适的内容" class="anchor"><span class="icon icon-link"></span></a>内容协商返回最合适的内容</h2>
        <p>内容协商机制是指客户端和服务器端就响应的资源内容进行交涉，然 后提供给客户端最为适合的资源。内容协商会以响应资源的语言、字符集、编码方式等作为判断的基准。</p>
        <p>包括：</p>
        <ul>
          <li>服务器驱动协商（Server-driven Negotiation）</li>
          <li>客户端驱动协商（Agent-driven Negotiation）</li>
          <li>透明协商（Transparent Negotiation）</li>
        </ul>
        <h2 id="状态码告知从服务器端返回的请求结果"><a aria-hidden="true" tabindex="-1" href="#状态码告知从服务器端返回的请求结果" class="anchor"><span class="icon icon-link"></span></a>状态码告知从服务器端返回的请求结果</h2>
        <p>状态码的职责是当客户端向服务器端发送请求时，描述返回的请求结果。</p>
        <p>数字中的第一位指定了响应类别，后两位无分类。响应类别有以下 5 种。</p>
        <p><code>1xx</code> 类状态码属于<strong>提示信息</strong>，是协议处理中的一种中间状态，实际用到的比较少。</p>
        <p><code>2xx</code> 类状态码表示服务器<strong>成功</strong>处理了客户端的请求，也是我们最愿意看到的状态。</p>
        <blockquote>
          <p>「200 OK 」: 表示从客户端发来的请求在服务器端被正常处理了。如果是非 <code>HEAD</code> 请求，服务器返回的响应头都会有 body 数据。</p>
          <p>「204 No Content」：该状态码代表服务器接收的请求已成功处理，但在返回的响应报文中不含实体的主体部分。一般在只需要从客户端往服务器发送信息，而对客户端不需要发送新信息内容的情况下使用。</p>
          <p>「206 Partial Content」：是应用于 HTTP 分块下载或断点续传，表示响应返回的 body 数据并不是资源的全部，而是其中的一部分，也是服务器处理成功的状态。</p>
        </blockquote>
        <p><code>3xx</code> 类状态码表示客户端请求的资源发生了变动，需要客户端用新的URL重新发送请求获取资源，也就是<strong>重定向</strong>。</p>
        <blockquote>
          <p>「301 Moved Permanently」 ：永久性重定向。该状态码表示请求的资源已被分配了新的 URI，以后应使用资源现在所指的 URI。</p>
          <p>「302 Found」：表示临时重定向，说明请求的资源还在，但暂时需要用另一个 URL 来访问。</p>
          <p>「304 Not Modified」：不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制。</p>
        </blockquote>
        <p><code>4xx</code> 类状态码表示客户端发送的<strong>报文有误</strong>，服务器无法处理，也就是错误码的含义。</p>
        <blockquote>
          <p>「400 Bad Request」：表示客户端请求的报文有错误，但只是个笼统的错误。</p>
          <p>「403 Forbidden」：表示服务器禁止访问资源，并不是客户端的请求出错。</p>
          <p>「404 Not Found」：表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。</p>
        </blockquote>
        <p><code>5xx</code> 类状态码表示客户端请求报文正确，但是<strong>服务器处理时内部发生了错误</strong>，属于服务器端的错误码。</p>
        <blockquote>
          <p>「500 Internal Server Error」：该状态码表明服务器端在执行请求时发生了错误。也有可能是 Web 应用存在的 bug 或某些临时的故障。</p>
          <p>「501 Not Implemented」表示客户端请求的功能还不支持，类似“即将开业，敬请期待”的意思。</p>
          <p>「502 Bad Gateway」通常是服务器作为网关或代理时返回的错误码，表示服务器自身工作正常，访问后端服务器发生了错误。</p>
          <p>「503 Service Unavailable」：该状态码表明服务器暂时处于超负载或正在进行停机维护，现在无法处理请求。</p>
        </blockquote>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#报文的结构" class="tocs-link">报文的结构</a></li>
            <li><a href="#编码提升传输速率" class="tocs-link">编码提升传输速率</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#报文主体和实体主体" class="tocs-link">报文主体和实体主体</a></li>
                <li><a href="#内容编码" class="tocs-link">内容编码</a></li>
                <li><a href="#分块传输编码" class="tocs-link">分块传输编码</a></li>
              </ol>
            </li>
            <li><a href="#发送多种数据的多部份对象集合" class="tocs-link">发送多种数据的多部份对象集合</a></li>
            <li><a href="#获取部分内容的范围请求" class="tocs-link">获取部分内容的范围请求</a></li>
            <li><a href="#内容协商返回最合适的内容" class="tocs-link">内容协商返回最合适的内容</a></li>
            <li><a href="#状态码告知从服务器端返回的请求结果" class="tocs-link">状态码告知从服务器端返回的请求结果</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.21.13"></script>
    <div class="footer warpper">Created by <a href="https://github.com/shixiaocaia" target="_blank">shixiaocaia</a> | Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a><br>Think less and do more.</div>
    <script src="../js/tocbot.js?v=1.21.13"></script>
  </body>
</html>
