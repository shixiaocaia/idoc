<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MIT6.S081环境配置 iDoc</title>
    <meta name="description" content="官方文档：WSl是适用于 Linux 的 Windows 子系统，可让开发人员按原样运行 GNU/Linux 环境，包括大多数命令行工具、实用工具和应用程序">
    <meta name="keywords" content="notebook">
    <link rel="stylesheet" type="text/css" href="../css/main.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/tocbot.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/media.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/sidebar.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/copy.css?v=1.25.0">
    <link rel="stylesheet" type="text/css" href="../css/fancybox.css?v=1.25.0">
    <link rel="icon" href="../logo.png" type="image/x-icon">
    <script src="../js/copy.js?v=1.25.0"></script>
    <script src="../js/dark-mode.js?v=1.25.0"></script>
    <script src="../js/markdown-style.js?v=1.25.0"></script>
    <script src="../js/jquery.min.js?v=1.25.0"></script>
    <script src="../js/fancybox.umd.js?v=1.25.0"></script>
  </head>
  <body><button onclick="topFunction()" id="myBtn" title="Go to top">Top</button>
    <script>
// Get the button:
let mybutton = document.getElementById("myBtn");
// When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {scrollFunction()};
// 顶部隐藏，底部隐藏
function scrollFunction() {
if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
mybutton.style.display = "block";
} else {
mybutton.style.display = "none";
}
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
document.body.scrollTop = 0; // For Safari
document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
}
</script>
    <header class="header">
      <article class="inner warpper"><a class="logo" href="../index.html"><img alt="iDoc logo" src="../logo.png">
<span class="title">iDoc</span></a>
        <div class="content">
          <ul class="menu">
            <li><a href="../index.html" target="" class="">Home</a></li>
            <li><a href="../00CPP/index.html" target="" class="">Cpp</a></li>
            <li><a href="../01DataStructure/index.html" target="" class="">DataStructure</a></li>
            <li><a href="../01OperatingSystem/index.html" target="" class="">OperatingSystem</a></li>
            <li><a href="../01ComputerNetwork/index.html" target="" class="">ComputerNetwrok</a></li>
            <li><a href="../01DataBase/index.html" target="" class="">DataBase</a></li>
            <li><a href="../02MyWeb/index.html" target="" class="">Webserver</a></li>
            <li><a href="../00Other/index.html" target="" class="">Other</a></li>
          </ul><a href="https://github.com/shixiaocaia" target="_blank" rel="noopener noreferrer" title="Github" name="Github" class="github"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
            </svg></a>
          <dark-mode permanent=""></dark-mode>
        </div>
      </article>
    </header>
    <div class="warpper-content warpper">
      <markdown-style>
        <h1 id="mit6s081环境配置"><a aria-hidden="true" tabindex="-1" href="#mit6s081环境配置" class="anchor"><span class="icon icon-link"></span></a>MIT6.S081环境配置</h1>
        <h2 id="启动与安装"><a aria-hidden="true" tabindex="-1" href="#启动与安装" class="anchor"><span class="icon icon-link"></span></a>启动与安装</h2>
        <p><a href="https://docs.microsoft.com/zh-cn/windows/wsl/">官方文档</a>：WSl是适用于 Linux 的 Windows 子系统，可让开发人员按原样运行 GNU/Linux 环境，包括大多数命令行工具、实用工具和应用程序</p>
        <p>WSL占用较少的资源且提供基本同样的体验，可以对windows文件系统的文件直接读写（VMWare需要借助工具），剪贴板也是公用的。</p>
        <h3 id="激活wsl"><a aria-hidden="true" tabindex="-1" href="#激活wsl" class="anchor"><span class="icon icon-link"></span></a>激活WSL</h3>
        <p>打开Windows PowerShell（管理员）（可以<code>Win+X</code>找到），执行以下命令：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
</span></code><input type="hidden" value="Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>之后重启电脑，WSL就成功激活了</p>
        <h3 id="安装发行版操作系统"><a aria-hidden="true" tabindex="-1" href="#安装发行版操作系统" class="anchor"><span class="icon icon-link"></span></a>安装发行版操作系统</h3>
        <p>打开Microsoft Store，查找想要的操作系统，在这里我使用的是<code>Ubuntu 20.04 -LTS</code>。</p>
        <p>选择自己想要的发行版操作系统安装，安装后打开，依提示设置用户名、密码即可开始使用</p>
        <h3 id="换源"><a aria-hidden="true" tabindex="-1" href="#换源" class="anchor"><span class="icon icon-link"></span></a>换源</h3>
        <p>官方软件源有时访问很慢，我们更换成清华源，依次执行以下命令（备份原本的安装源、编辑新的安装源）：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 
</span><span class="code-line line-number" line="2">sudo vim /etc/apt/sources.list
</span></code><input type="hidden" value="sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak 
sudo vim /etc/apt/sources.list
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>在打开的vim编辑器里，将内容清空（可以在指令模式下输入<code>:%d</code>快速清空），以<strong>Ubuntu 20.04.4 LTS</strong>为例（其他版本在<a href="https://mirror.tuna.tsinghua.edu.cn/help/ubuntu/">清华源官网</a>可查，输入以下内容（wsl的好处已经体现了，剪贴板互通可以直接复制）</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1"># 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
</span><span class="code-line line-number" line="2">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span><span class="code-line line-number" line="3"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
</span><span class="code-line line-number" line="4">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span><span class="code-line line-number" line="5"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
</span><span class="code-line line-number" line="6">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span><span class="code-line line-number" line="7"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
</span><span class="code-line line-number" line="8">deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span><span class="code-line line-number" line="9"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
</span><span class="code-line line-number" line="10">
</span><span class="code-line line-number" line="11"># 预发布软件源，不建议启用
</span><span class="code-line line-number" line="12"># deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
</span><span class="code-line line-number" line="13"># deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
</span></code><input type="hidden" value="# 默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse
deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse

# 预发布软件源，不建议启用
# deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
# deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="更新"><a aria-hidden="true" tabindex="-1" href="#更新" class="anchor"><span class="icon icon-link"></span></a>更新</h3>
        <p>依次输入以下代码进行软件更新：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo apt-get update
</span><span class="code-line line-number" line="2">sudo apt-get upgrade
</span></code><input type="hidden" value="sudo apt-get update
sudo apt-get upgrade
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="wsl迁移"><a aria-hidden="true" tabindex="-1" href="#wsl迁移" class="anchor"><span class="icon icon-link"></span></a>WSL迁移</h2>
        <p>从Microsoft Store安装的话直接安装在了C盘，但是随着使用可能C盘空间会爆炸，考虑迁移到其他盘。</p>
        <h3 id="关闭wsl并查看列表"><a aria-hidden="true" tabindex="-1" href="#关闭wsl并查看列表" class="anchor"><span class="icon icon-link"></span></a>关闭WSL并查看列表</h3>
        <p>在管理员Powershell，使用<code>wsl --shutdown</code>关闭，输入<code>wsl --list --all -v</code>查看当前所有的子系统，我只安装了一个Ubuntu20.04，效果如图：</p>
        <p>
          <img src="https://www.lyroch.site/posts/973e27dc/wsl.jpg" alt="wsl">
        </p>
        <h3 id="导出备份"><a aria-hidden="true" tabindex="-1" href="#导出备份" class="anchor"><span class="icon icon-link"></span></a>导出备份</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">wsl --export 子系统 备份包的存放路径
</span></code><input type="hidden" value="wsl --export 子系统 备份包的存放路径
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>子系统就是列表的NAME，选择你需要迁移的子系统；备份包的存放路径注意要写成…/xxx.tar的形式，xxx是你给备份包的命名，这里网上很多教程没有指明必须要有.tar后缀</p>
        <h3 id="注销子系统"><a aria-hidden="true" tabindex="-1" href="#注销子系统" class="anchor"><span class="icon icon-link"></span></a>注销子系统</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">wsl --unregister 子系统
</span></code><input type="hidden" value="wsl --unregister 子系统
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>此时如果再使用<code>wsl --list --all -v</code>就会发现已经没有了刚刚注销的子系统</p>
        <h3 id="导入备份"><a aria-hidden="true" tabindex="-1" href="#导入备份" class="anchor"><span class="icon icon-link"></span></a>导入备份</h3>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">wsl --import 子系统 子系统新路径 备份包的存放路径
</span></code><input type="hidden" value="wsl --import 子系统 子系统新路径 备份包的存放路径
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>子系统新路径即为你打算迁移该子系统的位置</p>
        <h3 id="设置登录默认用户"><a aria-hidden="true" tabindex="-1" href="#设置登录默认用户" class="anchor"><span class="icon icon-link"></span></a>设置登录默认用户</h3>
        <p>此时能够打开子系统就成功迁移了，但是会发现用户登录默认是root，为了将其改为我们刚打开系统设置的用户，在powershell里输入：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">Ubuntu2004 config --default-user 你要的默认登录用户名
</span></code><input type="hidden" value="Ubuntu2004 config --default-user 你要的默认登录用户名
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p><strong>注意这里的子系统</strong>，在网上看到了写Ubuntu-20.04的，写ubuntu的，我这里都报错，必须要用Ubuntu2004作为子系统名</p>
        <h2 id="重装系统"><a aria-hidden="true" tabindex="-1" href="#重装系统" class="anchor"><span class="icon icon-link"></span></a>重装系统</h2>
        <p>网上大多数都说从开始菜单，找到发行版（比如Ubuntu20.04），右键应用设置重置就可以了，然而我试了没有用，搜到另一个方法。在管理员PowerShell里输入<code>wsl -l</code>查看发行版名称，利用<code>wsl --unregister 子系统</code>注销，此时如果再次输入<code>wsl -l</code>就可以发现刚刚注销的发行版已经没有了，但是装的应用并没有删除，直接打开应用就重装了。</p>
        <p>如果之前切换过盘符，当初导出的压缩包并没有删除，注销后进行重新import就可以了。</p>
        <h2 id="文件互访"><a aria-hidden="true" tabindex="-1" href="#文件互访" class="anchor"><span class="icon icon-link"></span></a>文件互访</h2>
        <p>Windows的所有资源挂载在WSL Linux的<code>/mnt/Windows完整路径</code>下，Windows资源管理器输入<code>\\wsl$</code>可以直接访问Linux文件。</p>
        <h2 id="xv6lab系统"><a aria-hidden="true" tabindex="-1" href="#xv6lab系统" class="anchor"><span class="icon icon-link"></span></a>XV6Lab系统</h2>
        <h3 id="环境配置"><a aria-hidden="true" tabindex="-1" href="#环境配置" class="anchor"><span class="icon icon-link"></span></a>环境配置</h3>
        <p>若是刚启动的系统，别忘了进行</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo apt-get update
</span><span class="code-line line-number" line="2">sudo apt-get upgrade
</span></code><input type="hidden" value="sudo apt-get update
sudo apt-get upgrade
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>按<a href="https://pdos.csail.mit.edu/6.828/2021/tools.html">官网</a>的方法WSL只需一条指令：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">sudo apt-get install git build-essential gdb-multiarch qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
</span></code><input type="hidden" value="sudo apt-get install git build-essential gdb-multiarch qemu-system-misc gcc-riscv64-linux-gnu binutils-riscv64-linux-gnu
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="从github下载"><a aria-hidden="true" tabindex="-1" href="#从github下载" class="anchor"><span class="icon icon-link"></span></a>从Github下载</h3>
        <p>我clone的是2021版的lab</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">git clone git://g.csail.mit.edu/xv6-labs-2021
</span></code><input type="hidden" value="git clone git://g.csail.mit.edu/xv6-labs-2021
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>切换到文件夹，并切换到lab分支</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">cd xv6-labs-2021
</span><span class="code-line line-number" line="2">git checkout util
</span></code><input type="hidden" value="cd xv6-labs-2021
git checkout util
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="编译qemu"><a aria-hidden="true" tabindex="-1" href="#编译qemu" class="anchor"><span class="icon icon-link"></span></a>编译qemu</h3>
        <p>接上面，输入：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">make qemu
</span></code><input type="hidden" value="make qemu
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">xiaocia@shixiaocaia:~/xv6-labs-2021$ <span class="token function">sudo</span> <span class="token function">make</span> qemu
</span><span class="code-line line-number" line="2">qemu-system-riscv64 <span class="token parameter variable">-machine</span> virt <span class="token parameter variable">-bios</span> none <span class="token parameter variable">-kernel</span> kernel/kernel <span class="token parameter variable">-m</span> 128M <span class="token parameter variable">-smp</span> <span class="token number">3</span> <span class="token parameter variable">-nographic</span> <span class="token parameter variable">-drive</span> <span class="token assign-left variable">file</span><span class="token operator">=</span>fs.img,if<span class="token operator">=</span>none,format<span class="token operator">=</span>raw,id<span class="token operator">=</span>x0 <span class="token parameter variable">-device</span> virtio-blk-device,drive<span class="token operator">=</span>x0,bus<span class="token operator">=</span>virtio-mmio-bus.0
</span><span class="code-line line-number" line="3">
</span><span class="code-line line-number" line="4">xv6 kernel is booting
</span><span class="code-line line-number" line="5">
</span><span class="code-line line-number" line="6">hart <span class="token number">1</span> starting
</span><span class="code-line line-number" line="7">hart <span class="token number">2</span> starting
</span><span class="code-line line-number" line="8">init: starting <span class="token function">sh</span>
</span></code><input type="hidden" value="xiaocia@shixiaocaia:~/xv6-labs-2021$ sudo make qemu
qemu-system-riscv64 -machine virt -bios none -kernel kernel/kernel -m 128M -smp 3 -nographic -drive file=fs.img,if=none,format=raw,id=x0 -device virtio-blk-device,drive=x0,bus=virtio-mmio-bus.0

xv6 kernel is booting

hart 1 starting
hart 2 starting
init: starting sh
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="vscode配置"><a aria-hidden="true" tabindex="-1" href="#vscode配置" class="anchor"><span class="icon icon-link"></span></a>VSCode配置</h2>
        <h3 id="普通gdb调试"><a aria-hidden="true" tabindex="-1" href="#普通gdb调试" class="anchor"><span class="icon icon-link"></span></a>普通gdb调试</h3>
        <p>在目录下执行以下指令：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">make qemu-gdb
</span></code><input type="hidden" value="make qemu-gdb
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>另开一个终端，输入以下指令：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">gdb-multiarch kernel/kernel
</span></code><input type="hidden" value="gdb-multiarch kernel/kernel
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>结果会出现一大段字和gdb的界面，字里有一个warning，我不知道是否需要，但是网友的教程把它修改掉了，执行以下指令（退出qemu和gdb后），其中<code>xxx</code>是自己文件夹的路径：</p>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">echo "add-auto-load-safe-path xxx/xv6-labs-2021/.gdbinit" >> "xxx/.gdbinit"
</span></code><input type="hidden" value="echo &#x22;add-auto-load-safe-path xxx/xv6-labs-2021/.gdbinit&#x22; >> &#x22;xxx/.gdbinit&#x22;
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h3 id="wsl"><a aria-hidden="true" tabindex="-1" href="#wsl" class="anchor"><span class="icon icon-link"></span></a>WSL</h3>
        <ul>
          <li>下载<code>Remote-WSL</code>插件</li>
          <li>在Ubuntu中，输入<code>code .</code>，在这个文件夹中启动VSCode，会看到在远程资源管理器看到成功连接的界面。</li>
        </ul>
        <h3 id="gdb调试"><a aria-hidden="true" tabindex="-1" href="#gdb调试" class="anchor"><span class="icon icon-link"></span></a>gdb调试</h3>
        <ul>
          <li>
            <p>添加插件<code>C/C++</code></p>
          </li>
          <li>
            <p>创建<code>.vscode</code>文件夹，添加文件<code>launch.json</code></p>
            <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1"><span class="token punctuation">{</span>
</span><span class="code-line line-number" line="2">    <span class="token string">"version"</span><span class="token builtin class-name">:</span> <span class="token string">"0.2.0"</span>,
</span><span class="code-line line-number" line="3">    <span class="token string">"configurations"</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
</span><span class="code-line line-number" line="4">        <span class="token punctuation">{</span>
</span><span class="code-line line-number" line="5">            <span class="token string">"name"</span><span class="token builtin class-name">:</span> <span class="token string">"xv6debug"</span>,
</span><span class="code-line line-number" line="6">            <span class="token string">"type"</span><span class="token builtin class-name">:</span> <span class="token string">"cppdbg"</span>,
</span><span class="code-line line-number" line="7">            <span class="token string">"request"</span><span class="token builtin class-name">:</span> <span class="token string">"launch"</span>,
</span><span class="code-line line-number" line="8">            <span class="token string">"program"</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">${workspaceFolder}</span>/kernel/kernel"</span>,
</span><span class="code-line line-number" line="9">            <span class="token string">"stopAtEntry"</span><span class="token builtin class-name">:</span> true,
</span><span class="code-line line-number" line="10">            <span class="token string">"cwd"</span><span class="token builtin class-name">:</span> <span class="token string">"<span class="token variable">${workspaceFolder}</span>"</span>,
</span><span class="code-line line-number" line="11">            <span class="token string">"miDebuggerServerAddress"</span><span class="token builtin class-name">:</span> <span class="token string">"127.0.0.1:26000"</span>, //见.gdbinit 中 target remote xxxx:xx
</span><span class="code-line line-number" line="12">            <span class="token string">"miDebuggerPath"</span><span class="token builtin class-name">:</span> <span class="token string">"/usr/bin/gdb-multiarch"</span>, // <span class="token function">which</span> gdb-multiarch
</span><span class="code-line line-number" line="13">            <span class="token string">"MIMode"</span><span class="token builtin class-name">:</span> <span class="token string">"gdb"</span>,
</span><span class="code-line line-number" line="14">            <span class="token string">"preLaunchTask"</span><span class="token builtin class-name">:</span> <span class="token string">"xv6build"</span>
</span><span class="code-line line-number" line="15">        <span class="token punctuation">}</span>
</span><span class="code-line line-number" line="16">    <span class="token punctuation">]</span>
</span><span class="code-line line-number" line="17"><span class="token punctuation">}</span>
</span></code><input type="hidden" value="{
    &#x22;version&#x22;: &#x22;0.2.0&#x22;,
    &#x22;configurations&#x22;: [
        {
            &#x22;name&#x22;: &#x22;xv6debug&#x22;,
            &#x22;type&#x22;: &#x22;cppdbg&#x22;,
            &#x22;request&#x22;: &#x22;launch&#x22;,
            &#x22;program&#x22;: &#x22;${workspaceFolder}/kernel/kernel&#x22;,
            &#x22;stopAtEntry&#x22;: true,
            &#x22;cwd&#x22;: &#x22;${workspaceFolder}&#x22;,
            &#x22;miDebuggerServerAddress&#x22;: &#x22;127.0.0.1:26000&#x22;, //见.gdbinit 中 target remote xxxx:xx
            &#x22;miDebuggerPath&#x22;: &#x22;/usr/bin/gdb-multiarch&#x22;, // which gdb-multiarch
            &#x22;MIMode&#x22;: &#x22;gdb&#x22;,
            &#x22;preLaunchTask&#x22;: &#x22;xv6build&#x22;
        }
    ]
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
          </li>
        </ul>
        <p>其中<code>miDebuggerServerAddress</code>一项的内容，在目录下有一个<code>.gdbinit</code>文件，里面有"target remote …"，打开这个文件复制来地址后，将这一行注释掉（添加<code>@REM</code>）</p>
        <ul>
          <li>再添加文件<code>tasks.json</code>：</li>
        </ul>
        <pre><code class="code-highlight"><span class="code-line line-number" line="1">{
</span><span class="code-line line-number" line="2">    "version": "2.0.0",
</span><span class="code-line line-number" line="3">    "tasks": [
</span><span class="code-line line-number" line="4">        {
</span><span class="code-line line-number" line="5">            "label": "xv6build",
</span><span class="code-line line-number" line="6">            "type": "shell",
</span><span class="code-line line-number" line="7">            "isBackground": true,
</span><span class="code-line line-number" line="8">            "command": "make qemu-gdb",
</span><span class="code-line line-number" line="9">            "problemMatcher": [
</span><span class="code-line line-number" line="10">                {
</span><span class="code-line line-number" line="11">                    "pattern": [
</span><span class="code-line line-number" line="12">                        {
</span><span class="code-line line-number" line="13">                            "regexp": ".",
</span><span class="code-line line-number" line="14">                            "file": 1,
</span><span class="code-line line-number" line="15">                            "location": 2,
</span><span class="code-line line-number" line="16">                            "message": 3
</span><span class="code-line line-number" line="17">                        }
</span><span class="code-line line-number" line="18">                    ],
</span><span class="code-line line-number" line="19">                    "background": {
</span><span class="code-line line-number" line="20">                        "beginsPattern": ".*Now run 'gdb' in another window.",
</span><span class="code-line line-number" line="21">                        "endsPattern": "."
</span><span class="code-line line-number" line="22">                    }
</span><span class="code-line line-number" line="23">                }
</span><span class="code-line line-number" line="24">            ]
</span><span class="code-line line-number" line="25">        }
</span><span class="code-line line-number" line="26">    ]
</span><span class="code-line line-number" line="27">}
</span></code><input type="hidden" value="{
    &#x22;version&#x22;: &#x22;2.0.0&#x22;,
    &#x22;tasks&#x22;: [
        {
            &#x22;label&#x22;: &#x22;xv6build&#x22;,
            &#x22;type&#x22;: &#x22;shell&#x22;,
            &#x22;isBackground&#x22;: true,
            &#x22;command&#x22;: &#x22;make qemu-gdb&#x22;,
            &#x22;problemMatcher&#x22;: [
                {
                    &#x22;pattern&#x22;: [
                        {
                            &#x22;regexp&#x22;: &#x22;.&#x22;,
                            &#x22;file&#x22;: 1,
                            &#x22;location&#x22;: 2,
                            &#x22;message&#x22;: 3
                        }
                    ],
                    &#x22;background&#x22;: {
                        &#x22;beginsPattern&#x22;: &#x22;.*Now run &#x27;gdb&#x27; in another window.&#x22;,
                        &#x22;endsPattern&#x22;: &#x22;.&#x22;
                    }
                }
            ]
        }
    ]
}
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <h2 id="配置ssh环境"><a aria-hidden="true" tabindex="-1" href="#配置ssh环境" class="anchor"><span class="icon icon-link"></span></a>配置SSH环境</h2>
        <p>WSL 上的 SSH 服务器没有自动配置，需要手动重新安装，首先可以运行以下命令来检查</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">$ sudo service ssh stop
</span><span class="code-line line-number" line="2">$ sudo /usr/sbin/sshd -d
</span></code><input type="hidden" value="$ sudo service ssh stop
$ sudo /usr/sbin/sshd -d
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>如果出现debug1，sshd：no hostkeys available --exiting等信息，说明找不到 key，重新安装 openssh-server 就可以解决问题</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">$ sudo apt purge openssh-server
</span><span class="code-line line-number" line="2">$ sudo apt install openssh-server
</span></code><input type="hidden" value="$ sudo apt purge openssh-server
$ sudo apt install openssh-server
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>然后需要配置 /etc/ssh/sshd_config，用 sudo 权限运行 vim 修改如下三个关键字</p>
        <p>记得删除 #</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">Port 22
</span><span class="code-line line-number" line="2"># 这两行允许了 root 账户和密码登录
</span><span class="code-line line-number" line="3">PermitRootLogin yes
</span><span class="code-line line-number" line="4">PasswordAuthentication yes
</span></code><input type="hidden" value="Port 22
# 这两行允许了 root 账户和密码登录
PermitRootLogin yes
PasswordAuthentication yes
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>然后记得重启 ssh 服务</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">$ sudo service ssh restart
</span><span class="code-line line-number" line="2">$ sudo service ssh status
</span></code><input type="hidden" value="$ sudo service ssh restart
$ sudo service ssh status
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>如果需要用密码登录 root 账户，还需要设置密码</p>
        <pre class="language-text"><code class="language-text code-highlight"><span class="code-line line-number" line="1">$ sudo passwd root
</span></code><input type="hidden" value="$ sudo passwd root
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>然后就可以使用 SSH 工具进行连接啦，本地直接 localhost 即可</p>
        <h2 id="验证环境"><a aria-hidden="true" tabindex="-1" href="#验证环境" class="anchor"><span class="icon icon-link"></span></a>验证环境</h2>
        <pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line line-number" line="1">riscv64-unknown-elf-gcc <span class="token parameter variable">--version</span>
</span><span class="code-line line-number" line="2">
</span><span class="code-line line-number" line="3">qemu-system-risv64 <span class="token parameter variable">--version</span>
</span><span class="code-line line-number" line="4">
</span><span class="code-line line-number" line="5"><span class="token function">sudo</span> <span class="token function">make</span> qemu
</span><span class="code-line line-number" line="6">
</span><span class="code-line line-number" line="7"><span class="token function">ls</span>
</span></code><input type="hidden" value="riscv64-unknown-elf-gcc --version

qemu-system-risv64 --version

sudo make qemu

ls
"><div onclick="copied(this)" class="copied"><svg class="octicon-copy" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M0 6.75C0 5.784.784 5 1.75 5h1.5a.75.75 0 010 1.5h-1.5a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-1.5a.75.75 0 011.5 0v1.5A1.75 1.75 0 019.25 16h-7.5A1.75 1.75 0 010 14.25v-7.5z"></path><path fill-rule="evenodd" d="M5 1.75C5 .784 5.784 0 6.75 0h7.5C15.216 0 16 .784 16 1.75v7.5A1.75 1.75 0 0114.25 11h-7.5A1.75 1.75 0 015 9.25v-7.5zm1.75-.25a.25.25 0 00-.25.25v7.5c0 .138.112.25.25.25h7.5a.25.25 0 00.25-.25v-7.5a.25.25 0 00-.25-.25h-7.5z"></path></svg><svg class="octicon-check" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor" height="12" width="12"><path fill-rule="evenodd" d="M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 01-1.06 0L2.22 9.28a.75.75 0 011.06-1.06L6 10.94l6.72-6.72a.75.75 0 011.06 0z"></path></svg></div></pre>
        <p>因为 xv6 是通过 QEMU 启动的，所以如果退出 xv6 只需要退出 QEMU 即可。</p>
        <p>从 xv6 退出 QEMU 有两种形式，一种是回到 monitor 界面，一种是直接终止 QEMU 进程。</p>
        <p>退出方式都是通过命令键的组合来实现。</p>
        <p>回到 monitor 界面：<code>ctrl + a</code>，然后按<code>c</code> ，即可退出 xv6 的 shell 界面，进入 QEMU 的 monitor 界面，输入<code>q</code> 按回车即可退出 QEMU。</p>
        <p>终止 QEMU 进程：<code>ctrl + a</code>，然后按<code>x</code>，即可终止 QEMU 进程，回到 Shell 界面。</p>
        <h2 id="参考文章"><a aria-hidden="true" tabindex="-1" href="#参考文章" class="anchor"><span class="icon icon-link"></span></a>参考文章</h2>
        <ul>
          <li>
            <p><a href="https://www.lyroch.site/posts/973e27dc/#%E5%90%AF%E5%8A%A8%E4%B8%8E%E5%AE%89%E8%A3%85">【WSL】激活安装、迁移盘、重装系统</a></p>
          </li>
          <li>
            <p><a href="http://systee.com/posts/4be1f6bb/">【MIT 6.S081】实验环境配置</a></p>
          </li>
        </ul>
      </markdown-style>
      <nav class="tocs">
        <aside class="inner toc">
          <ol class="tocs-list">
            <li><a href="#启动与安装" class="tocs-link">启动与安装</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#激活wsl" class="tocs-link">激活WSL</a></li>
                <li><a href="#安装发行版操作系统" class="tocs-link">安装发行版操作系统</a></li>
                <li><a href="#换源" class="tocs-link">换源</a></li>
                <li><a href="#更新" class="tocs-link">更新</a></li>
              </ol>
            </li>
            <li><a href="#wsl迁移" class="tocs-link">WSL迁移</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#关闭wsl并查看列表" class="tocs-link">关闭WSL并查看列表</a></li>
                <li><a href="#导出备份" class="tocs-link">导出备份</a></li>
                <li><a href="#注销子系统" class="tocs-link">注销子系统</a></li>
                <li><a href="#导入备份" class="tocs-link">导入备份</a></li>
                <li><a href="#设置登录默认用户" class="tocs-link">设置登录默认用户</a></li>
              </ol>
            </li>
            <li><a href="#重装系统" class="tocs-link">重装系统</a></li>
            <li><a href="#文件互访" class="tocs-link">文件互访</a></li>
            <li><a href="#xv6lab系统" class="tocs-link">XV6Lab系统</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#环境配置" class="tocs-link">环境配置</a></li>
                <li><a href="#从github下载" class="tocs-link">从Github下载</a></li>
                <li><a href="#编译qemu" class="tocs-link">编译qemu</a></li>
              </ol>
            </li>
            <li><a href="#vscode配置" class="tocs-link">VSCode配置</a>
              <ol class="tocs-list is-collapsed">
                <li><a href="#普通gdb调试" class="tocs-link">普通gdb调试</a></li>
                <li><a href="#wsl" class="tocs-link">WSL</a></li>
                <li><a href="#gdb调试" class="tocs-link">gdb调试</a></li>
              </ol>
            </li>
            <li><a href="#配置ssh环境" class="tocs-link">配置SSH环境</a></li>
            <li><a href="#验证环境" class="tocs-link">验证环境</a></li>
            <li><a href="#参考文章" class="tocs-link">参考文章</a></li>
          </ol>
        </aside>
      </nav>
    </div>
    <script src="../js/demo-preview.js?v=1.25.0"></script>
    <div class="footer warpper">Created by <a href="https://github.com/shixiaocaia" target="_blank">shixiaocaia</a> | Powered by <a href="https://github.com/jaywcjlove/idoc" target="_blank">idoc</a><br>Think less and do more.</div>
    <script src="../js/tocbot.js?v=1.25.0"></script>
  </body>
</html>
